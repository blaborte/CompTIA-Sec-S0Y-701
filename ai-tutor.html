<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Study Tutor | Security+ SY0-701</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0b0e17;
    --bg2: #111520;
    --bg3: #181d2e;
    --border: #1f2740;
    --accent: #00d4ff;
    --green: #00f5a0;
    --red: #ff4757;
    --yellow: #ffd32a;
    --purple: #b47aff;
    --accent2: #ff6b2b;
    --text: #d0d8f0;
    --muted: #5a6a8a;
    --font: 'IBM Plex Sans', sans-serif;
    --mono: 'IBM Plex Mono', monospace;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--bg); color:var(--text); font-family:var(--font); height:100vh; display:flex; flex-direction:column; overflow:hidden; }

  /* HEADER */
  header { background:var(--bg2); border-bottom:1px solid var(--border); padding:0 2rem; display:flex; align-items:center; justify-content:space-between; height:64px; flex-shrink:0; }
  .logo { font-family:var(--mono); font-size:0.85rem; color:var(--muted); letter-spacing:0.1em; text-decoration:none; }
  .logo span { color:var(--accent); }
  .header-center { display:flex; align-items:center; gap:0.75rem; }
  .ai-badge { display:flex; align-items:center; gap:0.5rem; font-family:var(--mono); font-size:0.72rem; color:var(--purple); background:rgba(180,122,255,0.1); border:1px solid rgba(180,122,255,0.2); padding:0.3rem 0.8rem; border-radius:20px; }
  .ai-dot { width:7px; height:7px; border-radius:50%; background:var(--purple); animation:pulse 2s infinite; }
  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.5;transform:scale(0.8)} }
  .back-link { font-family:var(--mono); font-size:0.75rem; color:var(--muted); text-decoration:none; border:1px solid var(--border); padding:0.4rem 0.9rem; border-radius:6px; transition:all 0.2s; }
  .back-link:hover { color:var(--accent); border-color:var(--accent); }

  /* LAYOUT */
  .layout { display:grid; grid-template-columns:260px 1fr; flex:1; overflow:hidden; }

  /* SIDEBAR */
  .sidebar { background:var(--bg2); border-right:1px solid var(--border); display:flex; flex-direction:column; overflow-y:auto; }

  .sidebar-section { padding:1.25rem 1rem; border-bottom:1px solid var(--border); }
  .sidebar-label { font-family:var(--mono); font-size:0.65rem; letter-spacing:0.12em; text-transform:uppercase; color:var(--muted); margin-bottom:0.75rem; }

  .mode-btn { width:100%; text-align:left; padding:0.6rem 0.75rem; background:none; border:1px solid var(--border); border-radius:7px; color:var(--muted); font-family:var(--font); font-size:0.82rem; cursor:pointer; transition:all 0.2s; margin-bottom:0.4rem; display:flex; align-items:center; gap:0.6rem; }
  .mode-btn:hover { border-color:var(--accent); color:var(--text); }
  .mode-btn.active { background:rgba(0,212,255,0.08); border-color:var(--accent); color:var(--accent); }
  .mode-btn .mode-icon { font-size:1rem; flex-shrink:0; }

  .domain-chip { padding:0.4rem 0.65rem; background:var(--bg3); border:1px solid var(--border); border-radius:6px; font-family:var(--mono); font-size:0.7rem; cursor:pointer; transition:all 0.2s; margin:0.2rem; display:inline-block; color:var(--muted); }
  .domain-chip:hover { border-color:var(--accent); color:var(--text); }
  .domain-chip.active { background:rgba(0,212,255,0.1); border-color:var(--accent); color:var(--accent); }

  .quick-btn { width:100%; text-align:left; padding:0.5rem 0.75rem; background:var(--bg3); border:1px solid var(--border); border-radius:6px; color:var(--text); font-family:var(--font); font-size:0.78rem; cursor:pointer; transition:all 0.2s; margin-bottom:0.35rem; line-height:1.4; }
  .quick-btn:hover { border-color:var(--purple); color:var(--purple); }

  .sidebar-tip { font-size:0.75rem; color:var(--muted); line-height:1.5; font-family:var(--mono); }
  .sidebar-tip strong { color:var(--accent); }

  /* API KEY INPUT */
  .api-section { padding:1rem; border-bottom:1px solid var(--border); }
  .api-label { font-family:var(--mono); font-size:0.65rem; letter-spacing:0.1em; text-transform:uppercase; color:var(--muted); margin-bottom:0.5rem; }
  .api-input-row { display:flex; gap:0.4rem; }
  .api-input { flex:1; background:var(--bg3); border:1px solid var(--border); border-radius:5px; padding:0.4rem 0.6rem; font-family:var(--mono); font-size:0.7rem; color:var(--text); outline:none; min-width:0; }
  .api-input:focus { border-color:var(--accent); }
  .api-input::placeholder { color:var(--muted); }
  .api-save-btn { padding:0.4rem 0.6rem; background:rgba(0,212,255,0.1); border:1px solid var(--accent); border-radius:5px; color:var(--accent); font-family:var(--mono); font-size:0.68rem; cursor:pointer; transition:all 0.2s; white-space:nowrap; }
  .api-save-btn:hover { background:rgba(0,212,255,0.2); }
  .api-status { font-family:var(--mono); font-size:0.65rem; margin-top:0.4rem; }
  .api-status.ok { color:var(--green); }
  .api-status.none { color:var(--muted); }

  /* CHAT AREA */
  .chat-area { display:flex; flex-direction:column; overflow:hidden; }

  /* Messages */
  .messages { flex:1; overflow-y:auto; padding:1.5rem; display:flex; flex-direction:column; gap:1rem; scroll-behavior:smooth; }
  .messages::-webkit-scrollbar { width:4px; }
  .messages::-webkit-scrollbar-track { background:transparent; }
  .messages::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }

  /* Welcome */
  .welcome-card { background:var(--bg2); border:1px solid var(--border); border-radius:14px; padding:2rem; max-width:600px; margin:auto; text-align:center; position:relative; overflow:hidden; }
  .welcome-card::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--purple),var(--accent),var(--green)); }
  .welcome-icon { font-size:3rem; margin-bottom:1rem; display:block; }
  .welcome-title { font-size:1.3rem; font-weight:600; margin-bottom:0.5rem; background:linear-gradient(135deg,var(--purple),var(--accent)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
  .welcome-desc { font-size:0.85rem; color:var(--muted); margin-bottom:1.5rem; line-height:1.7; }
  .welcome-chips { display:flex; flex-wrap:wrap; gap:0.5rem; justify-content:center; }
  .welcome-chip { font-family:var(--mono); font-size:0.72rem; padding:0.4rem 0.9rem; background:var(--bg3); border:1px solid var(--border); border-radius:6px; cursor:pointer; color:var(--text); transition:all 0.2s; }
  .welcome-chip:hover { border-color:var(--purple); color:var(--purple); }

  /* Message bubbles */
  .msg { display:flex; gap:0.75rem; max-width:80%; animation:msgIn 0.2s ease; }
  @keyframes msgIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
  .msg.user { align-self:flex-end; flex-direction:row-reverse; }
  .msg.assistant { align-self:flex-start; }

  .msg-avatar { width:30px; height:30px; border-radius:50%; flex-shrink:0; display:flex; align-items:center; justify-content:center; font-size:0.85rem; margin-top:2px; }
  .msg.user .msg-avatar { background:rgba(0,212,255,0.15); border:1px solid rgba(0,212,255,0.2); }
  .msg.assistant .msg-avatar { background:rgba(180,122,255,0.15); border:1px solid rgba(180,122,255,0.2); }

  .msg-bubble { padding:0.85rem 1.1rem; border-radius:12px; font-size:0.88rem; line-height:1.7; }
  .msg.user .msg-bubble { background:rgba(0,212,255,0.1); border:1px solid rgba(0,212,255,0.15); border-bottom-right-radius:3px; color:var(--text); }
  .msg.assistant .msg-bubble { background:var(--bg2); border:1px solid var(--border); border-bottom-left-radius:3px; color:var(--text); }

  /* Markdown-ish styling inside bubbles */
  .msg-bubble strong { color:var(--accent); font-weight:600; }
  .msg-bubble em { color:var(--yellow); font-style:italic; }
  .msg-bubble code { font-family:var(--mono); font-size:0.82em; background:var(--bg3); padding:0.1em 0.4em; border-radius:3px; color:var(--green); }
  .msg-bubble ul, .msg-bubble ol { padding-left:1.2rem; margin:0.4rem 0; }
  .msg-bubble li { margin:0.2rem 0; }
  .msg-bubble hr { border:none; border-top:1px solid var(--border); margin:0.75rem 0; }

  /* Typing indicator */
  .typing-indicator { display:flex; gap:4px; padding:0.75rem 1rem; }
  .typing-dot { width:7px; height:7px; border-radius:50%; background:var(--purple); animation:typingBounce 1.2s infinite; }
  .typing-dot:nth-child(2) { animation-delay:0.2s; }
  .typing-dot:nth-child(3) { animation-delay:0.4s; }
  @keyframes typingBounce { 0%,60%,100%{transform:translateY(0);opacity:0.4} 30%{transform:translateY(-6px);opacity:1} }

  /* Quick action pills in chat */
  .quiz-card { background:var(--bg3); border:1px solid var(--border); border-radius:10px; padding:1rem 1.1rem; margin-top:0.6rem; }
  .quiz-question { font-size:0.88rem; font-weight:500; margin-bottom:0.75rem; color:var(--text); }
  .quiz-options { display:flex; flex-direction:column; gap:0.4rem; }
  .quiz-option { padding:0.5rem 0.8rem; background:var(--bg2); border:1px solid var(--border); border-radius:7px; font-size:0.82rem; cursor:pointer; transition:all 0.2s; text-align:left; color:var(--text); font-family:var(--font); }
  .quiz-option:hover { border-color:var(--accent); }
  .quiz-option.correct { border-color:var(--green); background:rgba(0,245,160,0.08); color:var(--green); }
  .quiz-option.wrong { border-color:var(--red); background:rgba(255,71,87,0.08); color:var(--red); }

  /* INPUT ROW */
  .input-row { padding:1rem 1.5rem; border-top:1px solid var(--border); background:var(--bg2); display:flex; gap:0.75rem; align-items:flex-end; }
  .input-wrap { flex:1; position:relative; }
  .chat-input { width:100%; background:var(--bg3); border:1px solid var(--border); border-radius:10px; padding:0.8rem 3rem 0.8rem 1rem; font-family:var(--font); font-size:0.88rem; color:var(--text); resize:none; outline:none; transition:border-color 0.2s; line-height:1.5; max-height:120px; overflow-y:auto; }
  .chat-input:focus { border-color:var(--accent); }
  .chat-input::placeholder { color:var(--muted); }
  .send-btn { position:absolute; right:0.6rem; bottom:0.6rem; width:32px; height:32px; background:linear-gradient(135deg,rgba(0,212,255,0.2),rgba(180,122,255,0.2)); border:1px solid var(--accent); border-radius:7px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:0.9rem; transition:all 0.2s; }
  .send-btn:hover { background:linear-gradient(135deg,rgba(0,212,255,0.35),rgba(180,122,255,0.35)); transform:scale(1.05); }
  .send-btn:disabled { opacity:0.4; cursor:not-allowed; transform:none; }
  .input-meta { font-family:var(--mono); font-size:0.65rem; color:var(--muted); white-space:nowrap; align-self:center; }

  footer { background:var(--bg2); border-top:1px solid var(--border); padding:0.6rem 1.5rem; text-align:center; font-size:0.72rem; color:var(--muted); font-family:var(--mono); flex-shrink:0; }

  @media(max-width:768px) { .layout { grid-template-columns:1fr; } .sidebar { display:none; } }
</style>
</head>
<body>

<header>
  <a href="index.html" class="logo">SECURITY+ <span>SY0-701</span></a>
  <div class="header-center">
    <div class="ai-badge"><span class="ai-dot"></span> AI Tutor Â· Free Â· No Key</div>
  </div>
  <a href="index.html" class="back-link">â† BACK</a>
</header>

<div class="layout">

  <!-- SIDEBAR -->
  <div class="sidebar">

    <!-- Free AI Badge -->
    <div style="padding:0.75rem 1rem;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:0.5rem;background:rgba(0,245,160,0.04);">
      <div style="width:7px;height:7px;border-radius:50%;background:var(--green);animation:pulse 2s infinite;flex-shrink:0;"></div>
      <span style="font-family:var(--mono);font-size:0.7rem;color:var(--green);">Free AI â€” No key needed</span>
      <span style="font-family:var(--mono);font-size:0.62rem;color:var(--muted);margin-left:auto;">Pollinations AI</span>
    </div>

    <!-- Mode -->
    <div class="sidebar-section">
      <div class="sidebar-label">Mode</div>
      <button class="mode-btn active" onclick="setMode('chat',this)" id="modeChat">
        <span class="mode-icon">ğŸ’¬</span> Free Chat
      </button>
      <button class="mode-btn" onclick="setMode('quiz',this)" id="modeQuiz">
        <span class="mode-icon">ğŸ¯</span> Quiz Mode
      </button>
      <button class="mode-btn" onclick="setMode('explain',this)" id="modeExplain">
        <span class="mode-icon">ğŸ“–</span> Explain Mode
      </button>
      <button class="mode-btn" onclick="setMode('practice',this)" id="modePractice">
        <span class="mode-icon">ğŸ“</span> Practice Questions
      </button>
    </div>

    <!-- Domain Filter -->
    <div class="sidebar-section">
      <div class="sidebar-label">Focus Domain</div>
      <div>
        <span class="domain-chip active" onclick="setDomain('all',this)">All Domains</span>
        <span class="domain-chip" onclick="setDomain('threats',this)">âš”ï¸ Threats</span>
        <span class="domain-chip" onclick="setDomain('architecture',this)">ğŸ—ï¸ Architecture</span>
        <span class="domain-chip" onclick="setDomain('implementation',this)">âš™ï¸ Implementation</span>
        <span class="domain-chip" onclick="setDomain('operations',this)">ğŸ” Operations</span>
        <span class="domain-chip" onclick="setDomain('governance',this)">ğŸ“œ Governance</span>
      </div>
    </div>

    <!-- Quick Prompts -->
    <div class="sidebar-section">
      <div class="sidebar-label">Quick Prompts</div>
      <button class="quick-btn" onclick="quickPrompt('Explain the difference between IDS and IPS with a real-world example.')">IDS vs IPS explained</button>
      <button class="quick-btn" onclick="quickPrompt('Quiz me on cryptography â€” give me a multiple choice question.')">Quiz: Cryptography</button>
      <button class="quick-btn" onclick="quickPrompt('What are the most commonly tested topics in the Threats domain of Security+ SY0-701?')">Top tested: Threats</button>
      <button class="quick-btn" onclick="quickPrompt('Explain the NIST SP 800-61 incident response lifecycle steps in simple terms.')">NIST IR lifecycle</button>
      <button class="quick-btn" onclick="quickPrompt('Give me 3 practice questions on access control and IAM for Security+ SY0-701.')">Practice Qs: IAM</button>
      <button class="quick-btn" onclick="quickPrompt('What is the difference between symmetric and asymmetric encryption? Give me an analogy.')">Crypto analogy</button>
      <button class="quick-btn" onclick="quickPrompt('I keep confusing phishing, spear phishing, whaling, vishing, and smishing. Can you explain each clearly?')">Social engineering types</button>
    </div>

    <!-- Tip -->
    <div class="sidebar-section">
      <div class="sidebar-tip">
        <strong>Tips:</strong><br>
        Ask anything about Security+ SY0-701.<br><br>
        Say <strong>"quiz me"</strong> for questions.<br>
        Say <strong>"explain"</strong> for concepts.<br>
        Say <strong>"I got this wrong"</strong> to review a mistake.
      </div>
    </div>

  </div>

  <!-- CHAT -->
  <div class="chat-area">
    <div class="messages" id="messages">
      <!-- Welcome shown by JS -->
    </div>

    <div class="input-row">
      <div class="input-wrap">
        <textarea class="chat-input" id="chatInput" placeholder="Ask anything about Security+ SY0-701..." rows="1"
          onkeydown="handleKey(event)" oninput="autoResize(this)"></textarea>
        <button class="send-btn" id="sendBtn" onclick="sendMessage()" title="Send">â¤</button>
      </div>
      <span class="input-meta" id="inputMeta">Enter to send</span>
    </div>
  </div>

</div>

<footer>AI responses are for study purposes only Â· Always verify with official CompTIA materials Â· <a href="disclaimer.html" style="color:var(--accent);text-decoration:none;">Disclaimer</a></footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let conversationHistory = [];
let currentMode = 'chat';
let currentDomain = 'all';
let isLoading = false;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SYSTEM PROMPTmeta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Study Tutor | Security+ SY0-701</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0b0e17;
    --bg2: #111520;
    --bg3: #181d2e;
    --border: #1f2740;
    --accent: #00d4ff;
    --green: #00f5a0;
    --red: #ff4757;
    --yellow: #ffd32a;
    --purple: #b47aff;
    --accent2: #ff6b2b;
    --text: #d0d8f0;
    --muted: #5a6a8a;
    --font: 'IBM Plex Sans', sans-serif;
    --mono: 'IBM Plex Mono', monospace;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--bg); color:var(--text); font-family:var(--font); height:100vh; display:flex; flex-direction:column; overflow:hidden; }

  /* HEADER */
  header { background:var(--bg2); border-bottom:1px solid var(--border); padding:0 2rem; display:flex; align-items:center; justify-content:space-between; height:64px; flex-shrink:0; }
  .logo { font-family:var(--mono); font-size:0.85rem; color:var(--muted); letter-spacing:0.1em; text-decoration:none; }
  .logo span { color:var(--accent); }
  .header-center { display:flex; align-items:center; gap:0.75rem; }
  .ai-badge { display:flex; align-items:center; gap:0.5rem; font-family:var(--mono); font-size:0.72rem; color:var(--purple); background:rgba(180,122,255,0.1); border:1px solid rgba(180,122,255,0.2); padding:0.3rem 0.8rem; border-radius:20px; }
  .ai-dot { width:7px; height:7px; border-radius:50%; background:var(--purple); animation:pulse 2s infinite; }
  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.5;transform:scale(0.8)} }
  .back-link { font-family:var(--mono); font-size:0.75rem; color:var(--muted); text-decoration:none; border:1px solid var(--border); padding:0.4rem 0.9rem; border-radius:6px; transition:all 0.2s; }
  .back-link:hover { color:var(--accent); border-color:var(--accent); }

  /* LAYOUT */
  .layout { display:grid; grid-template-columns:260px 1fr; flex:1; overflow:hidden; }

  /* SIDEBAR */
  .sidebar { background:var(--bg2); border-right:1px solid var(--border); display:flex; flex-direction:column; overflow-y:auto; }

  .sidebar-section { padding:1.25rem 1rem; border-bottom:1px solid var(--border); }
  .sidebar-label { font-family:var(--mono); font-size:0.65rem; letter-spacing:0.12em; text-transform:uppercase; color:var(--muted); margin-bottom:0.75rem; }

  .mode-btn { width:100%; text-align:left; padding:0.6rem 0.75rem; background:none; border:1px solid var(--border); border-radius:7px; color:var(--muted); font-family:var(--font); font-size:0.82rem; cursor:pointer; transition:all 0.2s; margin-bottom:0.4rem; display:flex; align-items:center; gap:0.6rem; }
  .mode-btn:hover { border-color:var(--accent); color:var(--text); }
  .mode-btn.active { background:rgba(0,212,255,0.08); border-color:var(--accent); color:var(--accent); }
  .mode-btn .mode-icon { font-size:1rem; flex-shrink:0; }

  .domain-chip { padding:0.4rem 0.65rem; background:var(--bg3); border:1px solid var(--border); border-radius:6px; font-family:var(--mono); font-size:0.7rem; cursor:pointer; transition:all 0.2s; margin:0.2rem; display:inline-block; color:var(--muted); }
  .domain-chip:hover { border-color:var(--accent); color:var(--text); }
  .domain-chip.active { background:rgba(0,212,255,0.1); border-color:var(--accent); color:var(--accent); }

  .quick-btn { width:100%; text-align:left; padding:0.5rem 0.75rem; background:var(--bg3); border:1px solid var(--border); border-radius:6px; color:var(--text); font-family:var(--font); font-size:0.78rem; cursor:pointer; transition:all 0.2s; margin-bottom:0.35rem; line-height:1.4; }
  .quick-btn:hover { border-color:var(--purple); color:var(--purple); }

  .sidebar-tip { font-size:0.75rem; color:var(--muted); line-height:1.5; font-family:var(--mono); }
  .sidebar-tip strong { color:var(--accent); }

  /* API KEY INPUT */
  .api-section { padding:1rem; border-bottom:1px solid var(--border); }
  .api-label { font-family:var(--mono); font-size:0.65rem; letter-spacing:0.1em; text-transform:uppercase; color:var(--muted); margin-bottom:0.5rem; }
  .api-input-row { display:flex; gap:0.4rem; }
  .api-input { flex:1; background:var(--bg3); border:1px solid var(--border); border-radius:5px; padding:0.4rem 0.6rem; font-family:var(--mono); font-size:0.7rem; color:var(--text); outline:none; min-width:0; }
  .api-input:focus { border-color:var(--accent); }
  .api-input::placeholder { color:var(--muted); }
  .api-save-btn { padding:0.4rem 0.6rem; background:rgba(0,212,255,0.1); border:1px solid var(--accent); border-radius:5px; color:var(--accent); font-family:var(--mono); font-size:0.68rem; cursor:pointer; transition:all 0.2s; white-space:nowrap; }
  .api-save-btn:hover { background:rgba(0,212,255,0.2); }
  .api-status { font-family:var(--mono); font-size:0.65rem; margin-top:0.4rem; }
  .api-status.ok { color:var(--green); }
  .api-status.none { color:var(--muted); }

  /* CHAT AREA */
  .chat-area { display:flex; flex-direction:column; overflow:hidden; }

  /* Messages */
  .messages { flex:1; overflow-y:auto; padding:1.5rem; display:flex; flex-direction:column; gap:1rem; scroll-behavior:smooth; }
  .messages::-webkit-scrollbar { width:4px; }
  .messages::-webkit-scrollbar-track { background:transparent; }
  .messages::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }

  /* Welcome */
  .welcome-card { background:var(--bg2); border:1px solid var(--border); border-radius:14px; padding:2rem; max-width:600px; margin:auto; text-align:center; position:relative; overflow:hidden; }
  .welcome-card::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--purple),var(--accent),var(--green)); }
  .welcome-icon { font-size:3rem; margin-bottom:1rem; display:block; }
  .welcome-title { font-size:1.3rem; font-weight:600; margin-bottom:0.5rem; background:linear-gradient(135deg,var(--purple),var(--accent)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
  .welcome-desc { font-size:0.85rem; color:var(--muted); margin-bottom:1.5rem; line-height:1.7; }
  .welcome-chips { display:flex; flex-wrap:wrap; gap:0.5rem; justify-content:center; }
  .welcome-chip { font-family:var(--mono); font-size:0.72rem; padding:0.4rem 0.9rem; background:var(--bg3); border:1px solid var(--border); border-radius:6px; cursor:pointer; color:var(--text); transition:all 0.2s; }
  .welcome-chip:hover { border-color:var(--purple); color:var(--purple); }

  /* Message bubbles */
  .msg { display:flex; gap:0.75rem; max-width:80%; animation:msgIn 0.2s ease; }
  @keyframes msgIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
  .msg.user { align-self:flex-end; flex-direction:row-reverse; }
  .msg.assistant { align-self:flex-start; }

  .msg-avatar { width:30px; height:30px; border-radius:50%; flex-shrink:0; display:flex; align-items:center; justify-content:center; font-size:0.85rem; margin-top:2px; }
  .msg.user .msg-avatar { background:rgba(0,212,255,0.15); border:1px solid rgba(0,212,255,0.2); }
  .msg.assistant .msg-avatar { background:rgba(180,122,255,0.15); border:1px solid rgba(180,122,255,0.2); }

  .msg-bubble { padding:0.85rem 1.1rem; border-radius:12px; font-size:0.88rem; line-height:1.7; }
  .msg.user .msg-bubble { background:rgba(0,212,255,0.1); border:1px solid rgba(0,212,255,0.15); border-bottom-right-radius:3px; color:var(--text); }
  .msg.assistant .msg-bubble { background:var(--bg2); border:1px solid var(--border); border-bottom-left-radius:3px; color:var(--text); }

  /* Markdown-ish styling inside bubbles */
  .msg-bubble strong { color:var(--accent); font-weight:600; }
  .msg-bubble em { color:var(--yellow); font-style:italic; }
  .msg-bubble code { font-family:var(--mono); font-size:0.82em; background:var(--bg3); padding:0.1em 0.4em; border-radius:3px; color:var(--green); }
  .msg-bubble ul, .msg-bubble ol { padding-left:1.2rem; margin:0.4rem 0; }
  .msg-bubble li { margin:0.2rem 0; }
  .msg-bubble hr { border:none; border-top:1px solid var(--border); margin:0.75rem 0; }

  /* Typing indicator */
  .typing-indicator { display:flex; gap:4px; padding:0.75rem 1rem; }
  .typing-dot { width:7px; height:7px; border-radius:50%; background:var(--purple); animation:typingBounce 1.2s infinite; }
  .typing-dot:nth-child(2) { animation-delay:0.2s; }
  .typing-dot:nth-child(3) { animation-delay:0.4s; }
  @keyframes typingBounce { 0%,60%,100%{transform:translateY(0);opacity:0.4} 30%{transform:translateY(-6px);opacity:1} }

  /* Quick action pills in chat */
  .quiz-card { background:var(--bg3); border:1px solid var(--border); border-radius:10px; padding:1rem 1.1rem; margin-top:0.6rem; }
  .quiz-question { font-size:0.88rem; font-weight:500; margin-bottom:0.75rem; color:var(--text); }
  .quiz-options { display:flex; flex-direction:column; gap:0.4rem; }
  .quiz-option { padding:0.5rem 0.8rem; background:var(--bg2); border:1px solid var(--border); border-radius:7px; font-size:0.82rem; cursor:pointer; transition:all 0.2s; text-align:left; color:var(--text); font-family:var(--font); }
  .quiz-option:hover { border-color:var(--accent); }
  .quiz-option.correct { border-color:var(--green); background:rgba(0,245,160,0.08); color:var(--green); }
  .quiz-option.wrong { border-color:var(--red); background:rgba(255,71,87,0.08); color:var(--red); }

  /* INPUT ROW */
  .input-row { padding:1rem 1.5rem; border-top:1px solid var(--border); background:var(--bg2); display:flex; gap:0.75rem; align-items:flex-end; }
  .input-wrap { flex:1; position:relative; }
  .chat-input { width:100%; background:var(--bg3); border:1px solid var(--border); border-radius:10px; padding:0.8rem 3rem 0.8rem 1rem; font-family:var(--font); font-size:0.88rem; color:var(--text); resize:none; outline:none; transition:border-color 0.2s; line-height:1.5; max-height:120px; overflow-y:auto; }
  .chat-input:focus { border-color:var(--accent); }
  .chat-input::placeholder { color:var(--muted); }
  .send-btn { position:absolute; right:0.6rem; bottom:0.6rem; width:32px; height:32px; background:linear-gradient(135deg,rgba(0,212,255,0.2),rgba(180,122,255,0.2)); border:1px solid var(--accent); border-radius:7px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:0.9rem; transition:all 0.2s; }
  .send-btn:hover { background:linear-gradient(135deg,rgba(0,212,255,0.35),rgba(180,122,255,0.35)); transform:scale(1.05); }
  .send-btn:disabled { opacity:0.4; cursor:not-allowed; transform:none; }
  .input-meta { font-family:var(--mono); font-size:0.65rem; color:var(--muted); white-space:nowrap; align-self:center; }

  footer { background:var(--bg2); border-top:1px solid var(--border); padding:0.6rem 1.5rem; text-align:center; font-size:0.72rem; color:var(--muted); font-family:var(--mono); flex-shrink:0; }

  @media(max-width:768px) { .layout { grid-template-columns:1fr; } .sidebar { display:none; } }
</style>
</head>
<body>

<header>
  <a href="index.html" class="logo">SECURITY+ <span>SY0-701</span></a>
  <div class="header-center">
    <div class="ai-badge"><span class="ai-dot"></span> AI Tutor Â· Free Â· No Key</div>
  </div>
  <a href="index.html" class="back-link">â† BACK</a>
</header>

<div class="layout">

  <!-- SIDEBAR -->
  <div class="sidebar">

    <!-- Free AI Badge -->
    <div style="padding:0.75rem 1rem;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:0.5rem;background:rgba(0,245,160,0.04);">
      <div style="width:7px;height:7px;border-radius:50%;background:var(--green);animation:pulse 2s infinite;flex-shrink:0;"></div>
      <span style="font-family:var(--mono);font-size:0.7rem;color:var(--green);">Free AI â€” No key needed</span>
      <span style="font-family:var(--mono);font-size:0.62rem;color:var(--muted);margin-left:auto;">Pollinations AI</span>
    </div>

    <!-- Mode -->
    <div class="sidebar-section">
      <div class="sidebar-label">Mode</div>
      <button class="mode-btn active" onclick="setMode('chat',this)" id="modeChat">
        <span class="mode-icon">ğŸ’¬</span> Free Chat
      </button>
      <button class="mode-btn" onclick="setMode('quiz',this)" id="modeQuiz">
        <span class="mode-icon">ğŸ¯</span> Quiz Mode
      </button>
      <button class="mode-btn" onclick="setMode('explain',this)" id="modeExplain">
        <span class="mode-icon">ğŸ“–</span> Explain Mode
      </button>
      <button class="mode-btn" onclick="setMode('practice',this)" id="modePractice">
        <span class="mode-icon">ğŸ“</span> Practice Questions
      </button>
    </div>

    <!-- Domain Filter -->
    <div class="sidebar-section">
      <div class="sidebar-label">Focus Domain</div>
      <div>
        <span class="domain-chip active" onclick="setDomain('all',this)">All Domains</span>
        <span class="domain-chip" onclick="setDomain('threats',this)">âš”ï¸ Threats</span>
        <span class="domain-chip" onclick="setDomain('architecture',this)">ğŸ—ï¸ Architecture</span>
        <span class="domain-chip" onclick="setDomain('implementation',this)">âš™ï¸ Implementation</span>
        <span class="domain-chip" onclick="setDomain('operations',this)">ğŸ” Operations</span>
        <span class="domain-chip" onclick="setDomain('governance',this)">ğŸ“œ Governance</span>
      </div>
    </div>

    <!-- Quick Prompts -->
    <div class="sidebar-section">
      <div class="sidebar-label">Quick Prompts</div>
      <button class="quick-btn" onclick="quickPrompt('Explain the difference between IDS and IPS with a real-world example.')">IDS vs IPS explained</button>
      <button class="quick-btn" onclick="quickPrompt('Quiz me on cryptography â€” give me a multiple choice question.')">Quiz: Cryptography</button>
      <button class="quick-btn" onclick="quickPrompt('What are the most commonly tested topics in the Threats domain of Security+ SY0-701?')">Top tested: Threats</button>
      <button class="quick-btn" onclick="quickPrompt('Explain the NIST SP 800-61 incident response lifecycle steps in simple terms.')">NIST IR lifecycle</button>
      <button class="quick-btn" onclick="quickPrompt('Give me 3 practice questions on access control and IAM for Security+ SY0-701.')">Practice Qs: IAM</button>
      <button class="quick-btn" onclick="quickPrompt('What is the difference between symmetric and asymmetric encryption? Give me an analogy.')">Crypto analogy</button>
      <button class="quick-btn" onclick="quickPrompt('I keep confusing phishing, spear phishing, whaling, vishing, and smishing. Can you explain each clearly?')">Social engineering types</button>
    </div>

    <!-- Tip -->
    <div class="sidebar-section">
      <div class="sidebar-tip">
        <strong>Tips:</strong><br>
        Ask anything about Security+ SY0-701.<br><br>
        Say <strong>"quiz me"</strong> for questions.<br>
        Say <strong>"explain"</strong> for concepts.<br>
        Say <strong>"I got this wrong"</strong> to review a mistake.
      </div>
    </div>

  </div>

  <!-- CHAT -->
  <div class="chat-area">
    <div class="messages" id="messages">
      <!-- Welcome shown by JS -->
    </div>

    <div class="input-row">
      <div class="input-wrap">
        <textarea class="chat-input" id="chatInput" placeholder="Ask anything about Security+ SY0-701..." rows="1"
          onkeydown="handleKey(event)" oninput="autoResize(this)"></textarea>
        <button class="send-btn" id="sendBtn" onclick="sendMessage()" title="Send">â¤</button>
      </div>
      <span class="input-meta" id="inputMeta">Enter to send</span>
    </div>
  </div>

</div>

<footer>AI responses are for study purposes only Â· Always verify with official CompTIA materials Â· <a href="disclaimer.html" style="color:var(--accent);text-decoration:none;">Disclaimer</a></footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let conversationHistory = [];
let currentMode = 'chat';
let currentDomain = 'all';
let isLoading = false;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// API KEY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Free AI â€” Pollinations, no API key needed

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SYSTEM PROMPT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildSystemPrompt() {
  const modeInstructions = {
    chat: 'You are in free chat mode. Answer any Security+ question conversationally and clearly.',
    quiz: 'You are in quiz mode. When asked to quiz the user, generate a 4-option multiple choice question. Format: question, then options labeled A/B/C/D, then wait for their answer before revealing the correct one.',
    explain: 'You are in explain mode. Give clear, detailed explanations with analogies, examples, and exam tips. Use the structure: What it is â†’ How it works â†’ Why it matters â†’ Exam tip.',
    practice: 'You are in practice question mode. Generate realistic Security+ SY0-701 exam-style questions with 4 options. After the user answers, explain why each option is correct or wrong.',
  };

  const domainContext = currentDomain === 'all' ? 'all five Security+ SY0-701 domains' :
    { threats:'Threats, Attacks & Mitigations (Domain 1)', architecture:'Architecture & Design (Domain 2)', implementation:'Implementation (Domain 3)', operations:'Operations & Incident Response (Domain 4)', governance:'Governance, Risk & Compliance (Domain 5)' }[currentDomain];

  return `You are an expert CompTIA Security+ SY0-701 AI study tutor built into a Security+ practice exam website. Your job is to help students pass the Security+ exam.

CURRENT MODE: ${modeInstructions[currentMode]}
FOCUS DOMAIN: ${domainContext}

CAPABILITIES:
- Answer any Security+ SY0-701 question in depth
- Generate realistic multiple-choice practice questions on demand
- Quiz the user on weak domains
- Explain concepts that were missed or misunderstood
- Give exam tips and mnemonics
- Clarify commonly confused pairs (IDS vs IPS, symmetric vs asymmetric, etc.)
- Discuss ANY cybersecurity topic (not limited to Security+)

RESPONSE STYLE:
- Be direct and clear. No unnecessary filler.
- Use **bold** for key terms, \`code\` for technical terms/commands
- Use bullet points for lists
- Always end explanations with a short "âš¡ Exam tip:"
- Keep answers focused but complete
- If generating a quiz question, wait for the user to answer before revealing the correct answer
- Be encouraging â€” this student is working hard toward their certification

When the user says things like "I got this wrong" or "explain why X is wrong", analyze their mistake and explain the correct reasoning clearly.`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SEND MESSAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function sendMessage(overrideText) {
  if (isLoading) return;
  const input = document.getElementById('chatInput');
  const text = overrideText || input.value.trim();
  if (!text) return;

  // Hide welcome if showing
  const welcome = document.getElementById('welcomeCard');
  if (welcome) welcome.remove();

  // Add user message
  appendMessage('user', text);
  conversationHistory.push({ role:'user', content:text });
  if (!overrideText) { input.value = ''; autoResize(input); }

  // Show typing
  const typingId = showTyping();
  isLoading = true;
  document.getElementById('sendBtn').disabled = true;
  document.getElementById('inputMeta').textContent = 'AI is thinking...';

  try {
    try {
    const messages = [
      { role: 'system', content: buildSystemPrompt() },
      ...conversationHistory,
    ];
    const response = await fetch('https://text.pollinations.ai/', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ model: 'openai', messages, seed: Math.floor(Math.random()*9999) }),
    });
    removeTyping(typingId);
    if (!response.ok) throw new Error('HTTP ' + response.status);
    const reply = await response.text();
    if (!reply || !reply.trim()) throw new Error('Empty response');
    conversationHistory.push({ role:'assistant', content: reply });
    appendMessage('assistant', reply);
  } catch (err) {
    removeTyping(typingId);
    appendMessage('assistant', 'âš ï¸ Could not reach the AI. Check your internet connection and try again.', true);
    console.error(err);
  }

  isLoading = false;
  document.getElementById('sendBtn').disabled = false;
  document.getElementById('inputMeta').textContent = 'Enter to send';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UI HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function appendMessage(role, text, isError) {
  const msgs = document.getElementById('messages');
  const div = document.createElement('div');
  div.className = 'msg ' + role;

  const avatar = document.createElement('div');
  avatar.className = 'msg-avatar';
  avatar.textContent = role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–';

  const bubble = document.createElement('div');
  bubble.className = 'msg-bubble';
  if (isError) bubble.style.borderColor = 'var(--red)';
  bubble.innerHTML = formatText(text);

  div.appendChild(avatar);
  div.appendChild(bubble);
  msgs.appendChild(div);
  msgs.scrollTop = msgs.scrollHeight;
}

function formatText(text) {
  return text
    .replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
    .replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>')
    .replace(/\*(.*?)\*/g,'<em>$1</em>')
    .replace(/`(.*?)`/g,'<code>$1</code>')
    .replace(/^#{1,3} (.+)$/gm,'<strong style="font-size:0.95em;display:block;margin-top:0.5em;color:var(--accent)">$1</strong>')
    .replace(/^[-â€¢] (.+)$/gm,'<li>$1</li>')
    .replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>')
    .replace(/^\d+\. (.+)$/gm,'<li>$1</li>')
    .replace(/\n\n/g,'<br><br>')
    .replace(/\n/g,'<br>')
    .replace(/âš¡ Exam tip:(.*?)(<br>|$)/g,'<div style="margin-top:0.6rem;padding:0.5rem 0.75rem;background:rgba(255,211,42,0.07);border:1px solid rgba(255,211,42,0.2);border-radius:6px;font-size:0.83em;color:var(--yellow)">âš¡ Exam tip:$1</div>');
}

let typingCounter = 0;
function showTyping() {
  const id = 'typing-' + (++typingCounter);
  const msgs = document.getElementById('messages');
  const div = document.createElement('div');
  div.className = 'msg assistant';
  div.id = id;
  div.innerHTML = `<div class="msg-avatar">ğŸ¤–</div><div class="msg-bubble"><div class="typing-indicator"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div></div>`;
  msgs.appendChild(div);
  msgs.scrollTop = msgs.scrollHeight;
  return id;
}
function removeTyping(id) {
  const el = document.getElementById(id);
  if (el) el.remove();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODE & DOMAIN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setMode(mode, btn) {
  currentMode = mode;
  document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  const placeholder = { chat:'Ask anything about Security+ SY0-701...', quiz:'Type "quiz me" or pick a domain and say "quiz me on threats"...', explain:'Type a concept to explain, e.g. "explain PKI"...', practice:'Type "give me 3 practice questions on cryptography"...' };
  document.getElementById('chatInput').placeholder = placeholder[mode] || placeholder.chat;
}

function setDomain(domain, chip) {
  currentDomain = domain;
  document.querySelectorAll('.domain-chip').forEach(c => c.classList.remove('active'));
  chip.classList.add('active');
}

function quickPrompt(text) {
  document.getElementById('chatInput').value = text;
  sendMessage();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INPUT HANDLING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function handleKey(e) {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }
}
function autoResize(el) {
  el.style.height = 'auto';
  el.style.height = Math.min(el.scrollHeight, 120) + 'px';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WELCOME SCREEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showWelcome() {
  const msgs = document.getElementById('messages');
  const card = document.createElement('div');
  card.id = 'welcomeCard';
  card.className = 'welcome-card';
  card.innerHTML = `
    <span class="welcome-icon">ğŸ“</span>
    <div class="welcome-title">Security+ AI Study Tutor</div>
    <div class="welcome-desc">
      I'm your personal Security+ SY0-701 study assistant powered by Claude AI.<br>
      Ask me anything â€” concepts, practice questions, weak spots, exam tips.
    </div>
    <div class="welcome-chips">
      <div class="welcome-chip" onclick="quickPrompt('Quiz me on the most common Security+ exam topics.')">ğŸ¯ Quiz me</div>
      <div class="welcome-chip" onclick="quickPrompt('What are my weakest Security+ domains based on common difficulty levels?')">âš ï¸ Weak spots</div>
      <div class="welcome-chip" onclick="quickPrompt('Give me 5 practice questions covering all Security+ domains.')">ğŸ“ Practice Qs</div>
      <div class="welcome-chip" onclick="quickPrompt('What topics should I focus on most for Security+ SY0-701?')">ğŸ—ºï¸ Study guide</div>
      <div class="welcome-chip" onclick="quickPrompt('Explain what makes Security+ SY0-701 different from previous versions.')">ğŸ“‹ SY0-701 changes</div>
      <div class="welcome-chip" onclick="quickPrompt('What are the best mnemonics for remembering Security+ concepts?')">ğŸ§  Mnemonics</div>
    </div>`;
  msgs.appendChild(card);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Free AI â€” Pollinations, no key needed
showWelcome();
</script>
</body>
</html>
