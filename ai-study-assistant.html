<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZeroTrust AI | Security+ SY0-701</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0b0e17;
    --bg2: #111520;
    --bg3: #181d2e;
    --border: #1f2740;
    --accent: #00d4ff;
    --green: #00f5a0;
    --red: #ff4757;
    --yellow: #ffd32a;
    --purple: #b47aff;
    --text: #d0d8f0;
    --muted: #5a6a8a;
    --font: 'IBM Plex Sans', sans-serif;
    --mono: 'IBM Plex Mono', monospace;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: var(--bg); color: var(--text); font-family: var(--font); min-height: 100vh; }

  header {
    background: var(--bg2);
    border-bottom: 1px solid var(--border);
    padding: 0 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 70px;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  .logo { font-family: var(--mono); font-size: 0.85rem; color: var(--muted); letter-spacing: 0.1em; }
  .logo span { color: var(--accent); }
  .home-btn {
    background: var(--bg3); border: 1px solid var(--border); color: var(--text);
    padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none;
    font-family: var(--mono); font-size: 0.8rem; transition: all 0.3s ease;
    display: flex; align-items: center; gap: 0.5rem;
  }
  .home-btn:hover { border-color: var(--accent); transform: translateY(-2px); }

  main { max-width: 900px; margin: 0 auto; padding: 2rem; }

  .intro { text-align: center; margin-bottom: 2rem; }
  h1 {
    font-size: 2.5rem; font-weight: 600; margin-bottom: 0.5rem;
    background: linear-gradient(135deg, var(--accent), var(--purple));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }
  .subtitle { color: var(--muted); margin-bottom: 1.5rem; }

  .ai-badge {
    display: inline-flex; align-items: center; gap: 0.5rem;
    background: linear-gradient(135deg, rgba(180,122,255,0.2), rgba(0,212,255,0.2));
    border: 1px solid var(--purple); padding: 0.5rem 1.25rem;
    border-radius: 20px; font-family: var(--mono); font-size: 0.8rem;
  }
  .pulse { width: 8px; height: 8px; background: var(--green); border-radius: 50%; animation: pulse 2s infinite; }
  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.5;transform:scale(1.3)} }

  /* API KEY SETUP BOX */
  .setup-box {
    background: var(--bg2);
    border: 2px solid var(--yellow);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
  }
  .setup-title {
    font-size: 1.2rem; font-weight: 600; color: var(--yellow);
    margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;
  }
  .setup-desc { color: var(--text); font-size: 0.95rem; line-height: 1.7; margin-bottom: 1.5rem; }
  .setup-steps { list-style: none; margin-bottom: 1.5rem; }
  .setup-steps li {
    padding: 0.75rem 1rem; margin-bottom: 0.5rem;
    background: var(--bg3); border: 1px solid var(--border); border-radius: 6px;
    font-size: 0.9rem; display: flex; align-items: flex-start; gap: 1rem;
  }
  .step-num {
    background: var(--yellow); color: var(--bg); width: 24px; height: 24px;
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-weight: 700; font-size: 0.8rem; flex-shrink: 0;
  }
  .key-input-row { display: flex; gap: 1rem; }
  .key-input {
    flex: 1; background: var(--bg3); border: 2px solid var(--border);
    border-radius: 8px; padding: 0.75rem 1rem; color: var(--text);
    font-family: var(--mono); font-size: 0.9rem;
  }
  .key-input:focus { outline: none; border-color: var(--accent); }
  .key-btn {
    background: linear-gradient(135deg, var(--accent), var(--green)); border: none;
    color: var(--bg); padding: 0.75rem 1.5rem; border-radius: 8px;
    font-weight: 600; cursor: pointer; font-family: var(--font); font-size: 0.9rem;
    transition: all 0.3s;
  }
  .key-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,212,255,0.3); }
  .key-note { font-size: 0.8rem; color: var(--muted); margin-top: 0.75rem; }
  .key-note a { color: var(--accent); }
  .key-success {
    background: rgba(0,245,160,0.1); border: 1px solid var(--green);
    border-radius: 8px; padding: 1rem; color: var(--green);
    font-family: var(--mono); font-size: 0.9rem; display: none;
    align-items: center; gap: 0.5rem; margin-top: 1rem;
  }
  .key-success.show { display: flex; }

  /* CHAT */
  .chat-box {
    background: var(--bg2); border: 1px solid var(--border);
    border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; height: 550px;
  }
  .chat-top {
    background: var(--bg3); border-bottom: 1px solid var(--border);
    padding: 1rem 1.5rem; display: flex; align-items: center; gap: 1rem;
  }
  .avatar {
    width: 42px; height: 42px;
    background: linear-gradient(135deg, var(--purple), var(--accent));
    border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.4rem;
  }
  .chat-name { font-weight: 600; font-size: 1.05rem; }
  .chat-online { font-family: var(--mono); font-size: 0.8rem; color: var(--green); }
  .clear-btn {
    margin-left: auto; background: var(--bg2); border: 1px solid var(--border);
    color: var(--muted); padding: 0.4rem 0.8rem; border-radius: 4px;
    font-family: var(--mono); font-size: 0.7rem; cursor: pointer; transition: all 0.2s;
  }
  .clear-btn:hover { border-color: var(--red); color: var(--red); }

  .messages {
    flex: 1; overflow-y: auto; padding: 1.5rem;
    display: flex; flex-direction: column; gap: 1.25rem;
  }
  .messages::-webkit-scrollbar { width: 4px; }
  .messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

  .msg { display: flex; gap: 0.75rem; animation: fadeUp 0.3s ease-out; }
  .msg.user { flex-direction: row-reverse; }
  @keyframes fadeUp { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }

  .msg-avatar {
    width: 34px; height: 34px; border-radius: 50%; flex-shrink: 0;
    display: flex; align-items: center; justify-content: center; font-size: 1.1rem;
  }
  .msg.ai .msg-avatar { background: linear-gradient(135deg, var(--purple), var(--accent)); }
  .msg.user .msg-avatar { background: var(--bg3); border: 1px solid var(--border); }

  .msg-bubble {
    max-width: 75%; background: var(--bg3); border: 1px solid var(--border);
    border-radius: 12px; padding: 1rem 1.25rem; line-height: 1.7; font-size: 0.95rem;
  }
  .msg.user .msg-bubble {
    background: linear-gradient(135deg, rgba(0,212,255,0.12), rgba(0,245,160,0.08));
    border-color: rgba(0,212,255,0.3);
  }
  .msg-bubble strong { color: var(--accent); }
  .msg-bubble code {
    background: var(--bg); padding: 0.15rem 0.4rem;
    border-radius: 3px; font-family: var(--mono); font-size: 0.85rem; color: var(--green);
  }
  .msg-bubble ul, .msg-bubble ol { padding-left: 1.25rem; margin: 0.5rem 0; }
  .msg-bubble li { margin-bottom: 0.3rem; }

  .typing { display: flex; gap: 5px; padding: 0.5rem 0; }
  .typing span {
    width: 7px; height: 7px; background: var(--muted); border-radius: 50%;
    animation: bounce 1.2s infinite;
  }
  .typing span:nth-child(2) { animation-delay: 0.2s; }
  .typing span:nth-child(3) { animation-delay: 0.4s; }
  @keyframes bounce { 0%,60%,100%{transform:translateY(0)} 30%{transform:translateY(-8px)} }

  .welcome {
    text-align: center; padding: 2rem 1rem; color: var(--muted);
  }
  .welcome-icon { font-size: 3.5rem; margin-bottom: 1rem; }
  .welcome h3 { color: var(--text); font-size: 1.1rem; margin-bottom: 0.5rem; }

  .chat-bottom {
    background: var(--bg3); border-top: 1px solid var(--border); padding: 1rem 1.5rem;
  }
  .input-row { display: flex; gap: 0.75rem; }
  .msg-input {
    flex: 1; background: var(--bg); border: 1px solid var(--border);
    border-radius: 8px; padding: 0.75rem 1rem; color: var(--text);
    font-family: var(--font); font-size: 0.95rem; resize: none; min-height: 44px; max-height: 120px;
  }
  .msg-input:focus { outline: none; border-color: var(--accent); }
  .send-btn {
    background: linear-gradient(135deg, var(--purple), var(--accent)); border: none;
    color: var(--bg); padding: 0 1.5rem; border-radius: 8px;
    font-weight: 600; cursor: pointer; font-family: var(--font); font-size: 0.9rem;
    transition: all 0.3s; white-space: nowrap;
  }
  .send-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(180,122,255,0.3); }
  .send-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

  /* QUICK TOPICS */
  .quick-topics { margin-top: 2rem; }
  .quick-label {
    font-family: var(--mono); font-size: 0.75rem; color: var(--muted);
    text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 1rem;
  }
  .topics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 0.75rem; }
  .topic {
    background: var(--bg2); border: 1px solid var(--border); border-radius: 8px;
    padding: 1rem; cursor: pointer; transition: all 0.3s; text-align: center;
  }
  .topic:hover { border-color: var(--purple); transform: translateY(-3px); }
  .topic-icon { font-size: 1.5rem; margin-bottom: 0.4rem; }
  .topic-name { font-size: 0.85rem; font-weight: 600; color: var(--text); }

  @media (max-width: 768px) {
    h1 { font-size: 2rem; }
    .msg-bubble { max-width: 88%; }
    .key-input-row { flex-direction: column; }
  }
</style>
</head>
<body>
  <header>
    <div class="logo">SECURITY+ <span>SY0-701</span> / ZEROTRUST AI</div>
    <a href="index.html" class="home-btn">‚Üê Home</a>
  </header>

  <main>
    <div class="intro">
      <h1>ZeroTrust AI</h1>
      <p class="subtitle">Your personal Security+ SY0-701 study assistant</p>
      <div class="ai-badge">
        <div class="pulse"></div>
        <span>Powered by ZeroTrust AI Engine</span>
      </div>
    </div>

    <!-- API KEY SETUP -->
    <div class="setup-box" id="setupBox">
      <div class="setup-title">üîë One-Time Setup Required</div>
      <p class="setup-desc">
        ZeroTrust AI uses the Claude API to answer your Security+ questions. You need a free Anthropic API key to activate it. This is stored only in your browser ‚Äî never shared with anyone.
      </p>
      <ul class="setup-steps">
        <li>
          <span class="step-num">1</span>
          <span>Go to <a href="https://console.anthropic.com" target="_blank" style="color:var(--accent)">console.anthropic.com</a> and sign up for a free account</span>
        </li>
        <li>
          <span class="step-num">2</span>
          <span>Click <strong>"Get API Keys"</strong> ‚Üí <strong>"Create Key"</strong> and copy your API key</span>
        </li>
        <li>
          <span class="step-num">3</span>
          <span>Paste your API key below and click <strong>Activate</strong></span>
        </li>
      </ul>
      <div class="key-input-row">
        <input type="password" class="key-input" id="apiKeyInput" placeholder="sk-ant-api03-..." />
        <button class="key-btn" onclick="activateKey()">Activate ZeroTrust</button>
      </div>
      <p class="key-note">üîí Your key is saved locally in your browser and never sent to any server except Anthropic directly.</p>
      <div class="key-success" id="keySuccess">‚úÖ ZeroTrust AI activated! You can start chatting below.</div>
    </div>

    <!-- CHAT -->
    <div class="chat-box">
      <div class="chat-top">
        <div class="avatar">üõ°Ô∏è</div>
        <div>
          <div class="chat-name">ZeroTrust</div>
          <div class="chat-online" id="chatStatus">‚óè Waiting for activation...</div>
        </div>
        <button class="clear-btn" onclick="clearChat()">Clear Chat</button>
      </div>

      <div class="messages" id="messages">
        <div class="welcome" id="welcomeMsg">
          <div class="welcome-icon">üõ°Ô∏è</div>
          <h3>Hi! I'm ZeroTrust</h3>
          <p>Your AI tutor for Security+ SY0-701. Add your API key above to start chatting!</p>
        </div>
      </div>

      <div class="chat-bottom">
        <div class="input-row">
          <textarea class="msg-input" id="msgInput" placeholder="Ask ZeroTrust anything about Security+..." rows="1" onkeydown="handleKey(event)"></textarea>
          <button class="send-btn" id="sendBtn" onclick="sendMessage()" disabled>Send</button>
        </div>
      </div>
    </div>

    <!-- QUICK TOPICS -->
    <div class="quick-topics">
      <div class="quick-label">Quick Topics</div>
      <div class="topics-grid">
        <div class="topic" onclick="ask('Explain the CIA Triad with examples')">
          <div class="topic-icon">üîê</div>
          <div class="topic-name">CIA Triad</div>
        </div>
        <div class="topic" onclick="ask('How does Zero Trust work? Explain the key components')">
          <div class="topic-icon">üõ°Ô∏è</div>
          <div class="topic-name">Zero Trust</div>
        </div>
        <div class="topic" onclick="ask('Give me 5 practice questions on encryption for Security+')">
          <div class="topic-icon">üìù</div>
          <div class="topic-name">Practice Quiz</div>
        </div>
        <div class="topic" onclick="ask('Explain types of malware: virus, worm, trojan, ransomware, spyware')">
          <div class="topic-icon">ü¶†</div>
          <div class="topic-name">Malware Types</div>
        </div>
        <div class="topic" onclick="ask('What is PKI and how do digital certificates work?')">
          <div class="topic-icon">üîë</div>
          <div class="topic-name">PKI & Certs</div>
        </div>
        <div class="topic" onclick="ask('Explain the NIST incident response lifecycle phases')">
          <div class="topic-icon">üö®</div>
          <div class="topic-name">Incident Response</div>
        </div>
        <div class="topic" onclick="ask('What are common network attacks and how to defend against them?')">
          <div class="topic-icon">üåê</div>
          <div class="topic-name">Network Attacks</div>
        </div>
        <div class="topic" onclick="ask('Explain social engineering attacks: phishing, vishing, smishing')">
          <div class="topic-icon">üë§</div>
          <div class="topic-name">Social Engineering</div>
        </div>
      </div>
    </div>
  </main>

  <script>
    let apiKey = localStorage.getItem('zerotrust_api_key') || '';
    let history = [];

    // Auto-activate if key exists
    if (apiKey) {
      activateWithKey(apiKey);
    }

    function activateKey() {
      const input = document.getElementById('apiKeyInput');
      const key = input.value.trim();
      if (!key.startsWith('sk-ant-')) {
        input.style.borderColor = 'var(--red)';
        input.placeholder = 'Invalid key - must start with sk-ant-...';
        return;
      }
      localStorage.setItem('zerotrust_api_key', key);
      apiKey = key;
      activateWithKey(key);
    }

    function activateWithKey(key) {
      apiKey = key;
      document.getElementById('keySuccess').classList.add('show');
      document.getElementById('sendBtn').disabled = false;
      document.getElementById('chatStatus').textContent = '‚óè Online & Ready';
      document.getElementById('chatStatus').style.color = 'var(--green)';

      // Hide setup box
      const setup = document.getElementById('setupBox');
      setup.style.borderColor = 'var(--green)';

      // Update welcome
      const welcome = document.getElementById('welcomeMsg');
      if (welcome) {
        welcome.innerHTML = `
          <div class="welcome-icon">üõ°Ô∏è</div>
          <h3>ZeroTrust is Ready!</h3>
          <p>Ask me anything about Security+ SY0-701 or click a quick topic below.</p>
        `;
      }
    }

    function ask(question) {
      if (!apiKey) {
        document.getElementById('apiKeyInput').focus();
        document.getElementById('setupBox').scrollIntoView({ behavior: 'smooth' });
        return;
      }
      document.getElementById('msgInput').value = question;
      sendMessage();
    }

    function handleKey(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
      // Auto-resize
      const ta = e.target;
      ta.style.height = 'auto';
      ta.style.height = Math.min(ta.scrollHeight, 120) + 'px';
    }

    async function sendMessage() {
      if (!apiKey) {
        document.getElementById('setupBox').scrollIntoView({ behavior: 'smooth' });
        return;
      }

      const input = document.getElementById('msgInput');
      const sendBtn = document.getElementById('sendBtn');
      const text = input.value.trim();
      if (!text) return;

      input.value = '';
      input.style.height = 'auto';
      input.disabled = true;
      sendBtn.disabled = true;

      appendMessage('user', text);
      showTyping();

      history.push({ role: 'user', content: text });

      try {
        const res = await fetch('https://api.anthropic.com/v1/messages', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-api-key': apiKey,
            'anthropic-version': '2023-06-01',
            'anthropic-dangerous-direct-browser-access': 'true'
          },
          body: JSON.stringify({
            model: 'claude-haiku-4-5-20251001',
            max_tokens: 1024,
            system: "You are ZeroTrust, a Security+ SY0-701 exam tutor AI. Give clear, concise, exam-focused answers. Use bullet points for lists. When generating practice questions, number them and clearly mark the correct answer with ‚úì. Keep responses helpful and encouraging.",
            messages: history
          })
        });

        removeTyping();

        if (!res.ok) {
          const err = await res.json();
          if (res.status === 401) {
            appendMessage('ai', '‚ùå **Invalid API key.** Please check your key and try again. Make sure it starts with `sk-ant-`');
            localStorage.removeItem('zerotrust_api_key');
            apiKey = '';
          } else if (res.status === 429) {
            appendMessage('ai', '‚è≥ **Rate limited.** You\'ve sent too many requests. Please wait a moment and try again.');
          } else {
            appendMessage('ai', `‚ùå **Error ${res.status}:** ${err.error?.message || 'Something went wrong. Please try again.'}`);
          }
        } else {
          const data = await res.json();
          const reply = data.content[0].text;
          history.push({ role: 'assistant', content: reply });
          appendMessage('ai', reply);
        }

      } catch (err) {
        removeTyping();
        appendMessage('ai', '‚ùå **Connection error.** Please check your internet connection and try again.');
        console.error(err);
      }

      input.disabled = false;
      sendBtn.disabled = false;
      input.focus();
    }

    function appendMessage(type, content) {
      const messagesDiv = document.getElementById('messages');
      const welcome = document.getElementById('welcomeMsg');
      if (welcome) welcome.remove();

      const div = document.createElement('div');
      div.className = `msg ${type}`;

      const av = document.createElement('div');
      av.className = 'msg-avatar';
      av.textContent = type === 'ai' ? 'üõ°Ô∏è' : 'üë§';

      const bubble = document.createElement('div');
      bubble.className = 'msg-bubble';
      bubble.innerHTML = formatMessage(content);

      div.appendChild(av);
      div.appendChild(bubble);
      messagesDiv.appendChild(div);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    function formatMessage(text) {
      return text
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/`([^`]+)`/g, '<code>$1</code>')
        .replace(/^### (.*$)/gm, '<strong style="color:var(--accent)">$1</strong>')
        .replace(/^## (.*$)/gm, '<strong style="color:var(--accent);font-size:1.05rem">$1</strong>')
        .replace(/^‚Ä¢ (.*$)/gm, '<li>$1</li>')
        .replace(/^\d+\. (.*$)/gm, '<li>$1</li>')
        .replace(/‚úì/g, '<span style="color:var(--green)">‚úì</span>')
        .replace(/‚ùå/g, '<span style="color:var(--red)">‚ùå</span>')
        .replace(/‚è≥/g, '‚è≥')
        .replace(/\n\n/g, '<br><br>')
        .replace(/\n/g, '<br>');
    }

    function showTyping() {
      const messagesDiv = document.getElementById('messages');
      const div = document.createElement('div');
      div.className = 'msg ai';
      div.id = 'typing';
      div.innerHTML = `
        <div class="msg-avatar">üõ°Ô∏è</div>
        <div class="msg-bubble">
          <div class="typing"><span></span><span></span><span></span></div>
        </div>`;
      messagesDiv.appendChild(div);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    function removeTyping() {
      const t = document.getElementById('typing');
      if (t) t.remove();
    }

    function clearChat() {
      history = [];
      const m = document.getElementById('messages');
      m.innerHTML = `
        <div class="welcome" id="welcomeMsg">
          <div class="welcome-icon">üõ°Ô∏è</div>
          <h3>Chat Cleared!</h3>
          <p>Start a new conversation with ZeroTrust.</p>
        </div>`;
    }
  </script>
</body>
</html>