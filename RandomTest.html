<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Security+ SY0-701 | Random Test Generator</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0b0e17;
    --bg2: #111520;
    --bg3: #181d2e;
    --border: #1f2740;
    --accent: #00d4ff;
    --accent2: #ff6b2b;
    --green: #00f5a0;
    --red: #ff4757;
    --yellow: #ffd32a;
    --purple: #7B2FBE;
    --text: #d0d8f0;
    --muted: #5a6a8a;
    --font: 'IBM Plex Sans', sans-serif;
    --mono: 'IBM Plex Mono', monospace;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--font);
    min-height: 100vh;
    line-height: 1.6;
    display: flex;
    flex-direction: column;
  }

  header {
    background: var(--bg2);
    border-bottom: 1px solid var(--border);
    padding: 0 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 70px;
  }

  .logo {
    font-family: var(--mono);
    font-size: 0.85rem;
    color: var(--muted);
    letter-spacing: 0.1em;
  }

  .logo span { color: var(--accent); }

  .home-btn {
    background: var(--bg3);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    text-decoration: none;
    font-family: var(--mono);
    font-size: 0.8rem;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .home-btn:hover {
    border-color: var(--accent);
    background: var(--bg2);
    transform: translateY(-2px);
  }

  main {
    flex: 1;
    padding: 2rem;
  }

  .container {
    max-width: 900px;
    margin: 0 auto;
    width: 100%;
  }

  h1 {
    font-size: 2.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, var(--accent), var(--purple));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .subtitle {
    color: var(--muted);
    font-size: 1rem;
    margin-bottom: 2.5rem;
    font-family: var(--mono);
    letter-spacing: 0.05em;
  }

  /* Config Card */
  .config-card {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 2rem;
    margin-bottom: 1.5rem;
  }

  .config-card h2 {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.15em;
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .config-card h2::before {
    content: '';
    display: inline-block;
    width: 8px;
    height: 8px;
    background: var(--accent);
    border-radius: 50%;
  }

  /* Toggle Groups */
  .toggle-group {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  .toggle-btn {
    background: var(--bg3);
    border: 1px solid var(--border);
    color: var(--muted);
    padding: 0.6rem 1.4rem;
    border-radius: 6px;
    font-family: var(--mono);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.25s ease;
    user-select: none;
  }

  .toggle-btn:hover {
    border-color: var(--accent);
    color: var(--text);
  }

  .toggle-btn.active {
    background: rgba(0, 212, 255, 0.12);
    border-color: var(--accent);
    color: var(--accent);
  }

  /* Source toggles - multi-select style */
  .source-btn.active {
    background: rgba(123, 47, 190, 0.15);
    border-color: var(--purple);
    color: #b06dff;
  }

  .source-btn:hover {
    border-color: var(--purple);
  }

  /* Timer toggle */
  .timed-btn.active {
    background: rgba(0, 245, 160, 0.1);
    border-color: var(--green);
    color: var(--green);
  }

  .timed-btn:hover {
    border-color: var(--green);
  }

  /* Timer input */
  .timer-options {
    display: none;
    margin-top: 1rem;
    gap: 0.75rem;
    flex-wrap: wrap;
    animation: fadeIn 0.3s ease;
  }

  .timer-options.visible { display: flex; }

  .timer-btn {
    background: var(--bg3);
    border: 1px solid var(--border);
    color: var(--muted);
    padding: 0.5rem 1.2rem;
    border-radius: 6px;
    font-family: var(--mono);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.25s ease;
  }

  .timer-btn:hover, .timer-btn.active {
    border-color: var(--green);
    color: var(--green);
    background: rgba(0, 245, 160, 0.08);
  }

  /* Summary bar */
  .summary-bar {
    background: var(--bg3);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.25rem 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 0.75rem;
    font-family: var(--mono);
    font-size: 0.82rem;
  }

  .summary-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--muted);
  }

  .summary-item .val {
    color: var(--text);
    font-weight: 600;
  }

  .summary-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--accent);
    flex-shrink: 0;
  }

  /* Generate Button */
  .generate-btn {
    width: 100%;
    background: linear-gradient(135deg, var(--accent), var(--purple));
    border: none;
    color: #fff;
    font-family: var(--mono);
    font-size: 1rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    padding: 1rem 2rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
  }

  .generate-btn::after {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s ease;
  }

  .generate-btn:hover::after { left: 100%; }

  .generate-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 28px rgba(0, 212, 255, 0.3);
  }

  .generate-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* Quiz Section */
  #quiz-section {
    display: none;
    animation: fadeIn 0.4s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Timer bar */
  .timer-bar-wrap {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1rem 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
  }

  .timer-display {
    font-family: var(--mono);
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--green);
    transition: color 0.3s;
  }

  .timer-display.warning { color: var(--yellow); }
  .timer-display.danger { color: var(--red); }

  .progress-track {
    flex: 1;
    height: 6px;
    background: var(--bg3);
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--green), var(--accent));
    border-radius: 3px;
    transition: width 1s linear, background 0.5s;
    width: 100%;
  }

  .progress-fill.warning { background: linear-gradient(90deg, var(--yellow), var(--accent2)); }
  .progress-fill.danger { background: var(--red); }

  .q-counter {
    font-family: var(--mono);
    font-size: 0.8rem;
    color: var(--muted);
    white-space: nowrap;
  }

  /* Question Card */
  .question-card {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 2rem;
    margin-bottom: 1.5rem;
    display: none;
    animation: fadeIn 0.3s ease;
  }

  .question-card.active { display: block; }

  .q-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.25rem;
  }

  .q-num {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--accent);
    letter-spacing: 0.1em;
  }

  .q-source-badge {
    font-family: var(--mono);
    font-size: 0.7rem;
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    background: rgba(123, 47, 190, 0.15);
    border: 1px solid var(--purple);
    color: #b06dff;
  }

  .q-text {
    font-size: 1rem;
    font-weight: 500;
    color: var(--text);
    margin-bottom: 1.5rem;
    line-height: 1.7;
  }

  .options-list { list-style: none; display: flex; flex-direction: column; gap: 0.6rem; }

  .option-item {
    background: var(--bg3);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.8rem 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.93rem;
  }

  .option-item:hover:not(.answered) {
    border-color: var(--accent);
    background: rgba(0, 212, 255, 0.05);
  }

  .option-letter {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--muted);
    width: 20px;
    flex-shrink: 0;
    text-transform: uppercase;
  }

  .option-item.correct {
    border-color: var(--green);
    background: rgba(0, 245, 160, 0.08);
  }

  .option-item.correct .option-letter { color: var(--green); }

  .option-item.wrong {
    border-color: var(--red);
    background: rgba(255, 71, 87, 0.08);
  }

  .option-item.wrong .option-letter { color: var(--red); }

  .option-item.selected-wrong {
    border-color: var(--red);
    background: rgba(255, 71, 87, 0.12);
  }

  .explanation {
    display: none;
    margin-top: 1rem;
    padding: 1rem;
    background: var(--bg3);
    border-left: 3px solid var(--green);
    border-radius: 0 6px 6px 0;
    font-size: 0.88rem;
    color: var(--muted);
    line-height: 1.7;
    animation: fadeIn 0.3s ease;
  }

  .explanation.show { display: block; }
  .explanation strong { color: var(--text); }

  /* Nav buttons */
  .q-nav {
    display: flex;
    justify-content: space-between;
    gap: 1rem;
    margin-top: 1rem;
  }

  .nav-btn {
    background: var(--bg3);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    font-family: var(--mono);
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.25s ease;
  }

  .nav-btn:hover:not(:disabled) {
    border-color: var(--accent);
    background: rgba(0, 212, 255, 0.08);
  }

  .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }

  .nav-btn.finish {
    background: rgba(0, 245, 160, 0.1);
    border-color: var(--green);
    color: var(--green);
  }

  /* Results */
  #results-section {
    display: none;
    animation: fadeIn 0.4s ease;
  }

  .results-card {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 2.5rem;
    text-align: center;
    margin-bottom: 1.5rem;
  }

  .score-ring {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    margin: 0 auto 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    position: relative;
  }

  .score-ring svg {
    position: absolute;
    top: 0; left: 0;
    transform: rotate(-90deg);
  }

  .score-ring circle {
    fill: none;
    stroke-width: 6;
    stroke-linecap: round;
  }

  .score-ring .track { stroke: var(--bg3); }
  .score-ring .fill { stroke: var(--accent); transition: stroke-dashoffset 1s ease; }

  .score-pct {
    font-family: var(--mono);
    font-size: 2rem;
    font-weight: 600;
    color: var(--text);
    position: relative;
  }

  .score-label {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--muted);
    position: relative;
  }

  .result-verdict {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  .result-verdict.pass { color: var(--green); }
  .result-verdict.fail { color: var(--red); }

  .result-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    margin-top: 1.5rem;
  }

  .stat-box {
    background: var(--bg3);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 1rem;
  }

  .stat-val { font-family: var(--mono); font-size: 1.5rem; font-weight: 600; }
  .stat-lbl { font-size: 0.78rem; color: var(--muted); margin-top: 0.25rem; }
  .stat-box.correct .stat-val { color: var(--green); }
  .stat-box.wrong .stat-val { color: var(--red); }
  .stat-box.time .stat-val { color: var(--accent); }

  .result-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .action-btn {
    background: var(--bg3);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 0.7rem 1.5rem;
    border-radius: 6px;
    font-family: var(--mono);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.25s ease;
    text-decoration: none;
    display: inline-block;
  }

  .action-btn:hover { border-color: var(--accent); transform: translateY(-2px); }
  .action-btn.primary { background: rgba(0, 212, 255, 0.1); border-color: var(--accent); color: var(--accent); }

  footer {
    padding: 2rem;
    text-align: center;
    color: var(--muted);
    font-size: 0.85rem;
    font-family: var(--mono);
    border-top: 1px solid var(--border);
    margin-top: 3rem;
  }

  @media (max-width: 768px) {
    h1 { font-size: 2rem; }
    header { padding: 0 1rem; }
    main { padding: 1rem; }
    .result-stats { grid-template-columns: 1fr 1fr; }
  }
</style>
</head>
<body>

<header>
  <div class="logo">SECURITY+ <span>SY0-701</span> RANDOM TEST</div>
  <a href="Practice-tests.html" class="home-btn">
    <span>←</span>
    <span>Back</span>
  </a>
</header>

<main>
  <div class="container">

    <!-- Config Panel -->
    <div id="config-panel">
      <h1>Random Test Generator</h1>
      <p class="subtitle">// Configure your session and launch</p>

      <!-- Question Count -->
      <div class="config-card">
        <h2>Number of Questions</h2>
        <div class="toggle-group" id="count-group">
          <button class="toggle-btn active" data-val="10" onclick="setCount(this)">10 Questions</button>
          <button class="toggle-btn" data-val="20" onclick="setCount(this)">20 Questions</button>
          <button class="toggle-btn" data-val="30" onclick="setCount(this)">30 Questions</button>
        </div>
      </div>

      <!-- Source Selection -->
      <div class="config-card">
        <h2>Question Source</h2>
        <div class="toggle-group" id="source-group">
          <button class="toggle-btn source-btn active" data-val="messer" onclick="toggleSource(this)">Professor Messer</button>
          <button class="toggle-btn source-btn active" data-val="examcompass" onclick="toggleSource(this)">ExamCompass</button>
        </div>
      </div>

      <!-- Timed Mode -->
      <div class="config-card">
        <h2>Timer</h2>
        <div class="toggle-group">
          <button class="toggle-btn timed-btn" data-val="timed" id="timed-toggle" onclick="toggleTimed()">⏱ Timed Mode</button>
          <button class="toggle-btn timed-btn active" data-val="untimed" id="untimed-toggle" onclick="toggleUntimed()">∞ No Time Limit</button>
        </div>
        <div class="timer-options" id="timer-options">
          <button class="timer-btn active" data-mins="10" onclick="setTimer(this)">10 min</button>
          <button class="timer-btn" data-mins="20" onclick="setTimer(this)">20 min</button>
          <button class="timer-btn" data-mins="30" onclick="setTimer(this)">30 min</button>
          <button class="timer-btn" data-mins="45" onclick="setTimer(this)">45 min</button>
          <button class="timer-btn" data-mins="90" onclick="setTimer(this)">90 min (Full)</button>
        </div>
      </div>

      <!-- Summary -->
      <div class="summary-bar" id="summary-bar">
        <div class="summary-item"><span class="summary-dot"></span><span>Questions: <span class="val" id="sum-count">10</span></span></div>
        <div class="summary-item"><span class="summary-dot" style="background:var(--purple)"></span><span>Sources: <span class="val" id="sum-source">All</span></span></div>
        <div class="summary-item"><span class="summary-dot" style="background:var(--green)"></span><span>Timer: <span class="val" id="sum-timer">Off</span></span></div>
      </div>

      <button class="generate-btn" id="gen-btn" onclick="generateTest()">⚡ Generate Random Test</button>
    </div>

    <!-- Quiz Section -->
    <div id="quiz-section">
      <div class="timer-bar-wrap" id="timer-wrap" style="display:none">
        <div class="timer-display" id="timer-display">90:00</div>
        <div class="progress-track">
          <div class="progress-fill" id="timer-fill"></div>
        </div>
        <div class="q-counter" id="q-counter">Q 1 / 10</div>
      </div>
      <div class="q-counter" id="q-counter-notimer" style="font-family:var(--mono);font-size:0.8rem;color:var(--muted);margin-bottom:1rem;">Q 1 / 10</div>

      <div id="questions-wrap"></div>

      <div class="q-nav">
        <button class="nav-btn" id="prev-btn" onclick="navigate(-1)" disabled>← Prev</button>
        <button class="nav-btn" id="next-btn" onclick="navigate(1)">Next →</button>
        <button class="nav-btn finish" id="finish-btn" onclick="finishTest()" style="display:none">Finish Test ✓</button>
      </div>
    </div>

    <!-- Results Section -->
    <div id="results-section">
      <div class="results-card">
        <div class="score-ring" id="score-ring">
          <svg width="140" height="140" viewBox="0 0 140 140">
            <circle class="track" cx="70" cy="70" r="60" />
            <circle class="fill" id="score-circle" cx="70" cy="70" r="60"
              stroke-dasharray="377" stroke-dashoffset="377" />
          </svg>
          <div class="score-pct" id="score-pct">0%</div>
          <div class="score-label">Score</div>
        </div>

        <div class="result-verdict" id="result-verdict">--</div>
        <div style="color:var(--muted);font-size:0.9rem;font-family:var(--mono)" id="result-sub">--</div>

        <div class="result-stats">
          <div class="stat-box correct">
            <div class="stat-val" id="stat-correct">--</div>
            <div class="stat-lbl">Correct</div>
          </div>
          <div class="stat-box wrong">
            <div class="stat-val" id="stat-wrong">--</div>
            <div class="stat-lbl">Incorrect</div>
          </div>
          <div class="stat-box time">
            <div class="stat-val" id="stat-time">--</div>
            <div class="stat-lbl">Time Taken</div>
          </div>
        </div>
      </div>

      <div class="result-actions">
        <button class="action-btn primary" onclick="retryTest()">↺ New Random Test</button>
        <a href="Practice-tests.html" class="action-btn">← Back to Tests</a>
      </div>
    </div>

  </div>
</main>

<footer>
  CompTIA Security+ SY0-701 | Random Test Generator
</footer>

<script>
// ─── Question Bank ───────────────────────────────────────────────────────────

const MESSER_QUESTIONS = [
  {
    q: "Which of the following BEST describes a man-in-the-middle attack?",
    options: ["An attacker intercepts and potentially alters communications between two parties", "An attacker sends malicious code embedded in an email attachment", "An attacker overwhelms a server with excessive traffic", "An attacker guesses user passwords through trial and error"],
    answer: 0,
    explanation: "A man-in-the-middle (MitM) attack occurs when an attacker secretly intercepts and relays communications between two parties who believe they are communicating directly. The attacker can read, alter, or inject messages."
  },
  {
    q: "What is the PRIMARY purpose of a certificate revocation list (CRL)?",
    options: ["To list all valid certificates issued by a CA", "To identify certificates that have been revoked before their expiration", "To store private keys for certificates", "To renew expired SSL certificates automatically"],
    answer: 1,
    explanation: "A CRL is a list maintained by a Certificate Authority (CA) that contains serial numbers of certificates that have been revoked before their scheduled expiration. Applications check the CRL to verify whether a certificate is still trustworthy."
  },
  {
    q: "A user receives an email from their 'bank' asking them to click a link and verify account details. This is MOST likely an example of:",
    options: ["Vishing", "Smishing", "Phishing", "Pharming"],
    answer: 2,
    explanation: "Phishing involves deceptive emails that impersonate legitimate organizations to trick users into revealing sensitive information. Vishing uses voice calls, smishing uses SMS, and pharming redirects users from legitimate websites to malicious ones."
  },
  {
    q: "Which access control model uses data classification labels and subject clearances to determine access?",
    options: ["DAC", "RBAC", "MAC", "ABAC"],
    answer: 2,
    explanation: "Mandatory Access Control (MAC) uses security labels (e.g., Top Secret, Secret) assigned to both data and users. Access is granted based on the comparison of these labels. This model is enforced by the system and cannot be overridden by users."
  },
  {
    q: "What does the term 'salting' refer to in the context of password security?",
    options: ["Encrypting passwords with AES-256", "Storing passwords in plain text in a database", "Adding a random value to a password before hashing to prevent rainbow table attacks", "Requiring passwords to be changed every 30 days"],
    answer: 2,
    explanation: "Salting adds a unique random value to each password before hashing. This means that even if two users have the same password, their hashed values will differ. Salting makes precomputed rainbow table attacks ineffective."
  },
  {
    q: "Which protocol provides secure remote login over an encrypted channel?",
    options: ["Telnet", "FTP", "SSH", "SNMP"],
    answer: 2,
    explanation: "SSH (Secure Shell) provides a secure, encrypted channel for remote login and other network services. Telnet and FTP transmit data in plaintext and are considered insecure."
  },
  {
    q: "An attacker sends thousands of requests to a single web server, causing it to become unavailable. This is an example of:",
    options: ["SQL Injection", "Cross-Site Scripting (XSS)", "Denial of Service (DoS)", "Directory Traversal"],
    answer: 2,
    explanation: "A Denial of Service (DoS) attack aims to make a resource unavailable to its intended users by overwhelming it with traffic or requests. A Distributed DoS (DDoS) uses multiple sources."
  },
  {
    q: "What is the MAIN difference between symmetric and asymmetric encryption?",
    options: ["Symmetric encryption uses two keys; asymmetric uses one", "Symmetric uses the same key for encryption and decryption; asymmetric uses a key pair", "Asymmetric encryption is faster than symmetric", "Symmetric encryption cannot be used for digital signatures"],
    answer: 1,
    explanation: "Symmetric encryption uses the same key for both encryption and decryption (e.g., AES). Asymmetric encryption uses a key pair — a public key for encryption and a private key for decryption (e.g., RSA). Symmetric is generally faster; asymmetric solves the key distribution problem."
  },
  {
    q: "Which of the following is a detective control?",
    options: ["Firewall", "Security awareness training", "Intrusion Detection System (IDS)", "Data encryption"],
    answer: 2,
    explanation: "Detective controls identify and alert on security events after they occur. An IDS monitors network traffic for suspicious patterns. Firewalls are preventive controls, training is a preventive/administrative control, and encryption is a preventive control."
  },
  {
    q: "A company wants to ensure that even if one security control fails, another will prevent a breach. This principle is called:",
    options: ["Least privilege", "Defense in depth", "Separation of duties", "Zero trust"],
    answer: 1,
    explanation: "Defense in depth (also called layered security) uses multiple security controls so that if one fails, others are in place to detect or stop threats. This approach reduces the risk of a single point of failure."
  },
  {
    q: "What type of malware disguises itself as legitimate software to trick users into installing it?",
    options: ["Worm", "Trojan horse", "Rootkit", "Adware"],
    answer: 1,
    explanation: "A Trojan horse masquerades as legitimate or useful software. Once executed, it performs malicious activities without the user's knowledge. Unlike worms, Trojans don't self-replicate."
  },
  {
    q: "Which of the following BEST describes the concept of least privilege?",
    options: ["Users should have access to all resources to maximize productivity", "Users should be granted only the minimum permissions needed to perform their job", "Administrators should have the same access as regular users", "Access rights should be reviewed once a year"],
    answer: 1,
    explanation: "The principle of least privilege states that users, programs, and systems should have the minimum level of access required to perform their functions. This reduces the attack surface and limits potential damage from compromised accounts."
  },
  {
    q: "Which hashing algorithm is considered MOST secure among the following options?",
    options: ["MD5", "SHA-1", "SHA-256", "DES"],
    answer: 2,
    explanation: "SHA-256 (part of SHA-2 family) is currently considered secure and widely used. MD5 and SHA-1 are cryptographically broken and vulnerable to collision attacks. DES is a symmetric encryption algorithm, not a hash function."
  },
  {
    q: "What is the purpose of a DMZ (Demilitarized Zone) in network architecture?",
    options: ["To store classified data away from the internet", "To provide a buffer zone between the internal network and the internet for hosting public-facing services", "To isolate infected machines during an incident response", "To monitor all outbound traffic from employees"],
    answer: 1,
    explanation: "A DMZ is a network segment that sits between the internal trusted network and the untrusted internet. It hosts public-facing services (web servers, email servers) while keeping the internal network protected from direct internet exposure."
  },
  {
    q: "An organization discovers that an attacker has been present in their network for 6 months without detection. This is BEST described as:",
    options: ["A zero-day exploit", "An Advanced Persistent Threat (APT)", "A logic bomb", "A replay attack"],
    answer: 1,
    explanation: "An Advanced Persistent Threat (APT) involves a sophisticated, long-term attack in which an unauthorized user maintains access to a network for an extended period. APTs are often nation-state sponsored and aim at data exfiltration."
  },
  {
    q: "Which of the following is an example of multi-factor authentication (MFA)?",
    options: ["Using a long, complex password", "Entering a password and receiving an SMS code", "Using biometric authentication alone", "Providing two different passwords"],
    answer: 1,
    explanation: "MFA requires two or more different authentication factors: something you know (password), something you have (token/SMS code), or something you are (biometrics). Entering a password + SMS code uses two separate factors."
  },
  {
    q: "What does HTTPS provide that HTTP does not?",
    options: ["Faster data transmission", "Encryption and authentication via TLS/SSL", "Permanent caching of web content", "Automatic firewall protection"],
    answer: 1,
    explanation: "HTTPS (HTTP Secure) uses TLS/SSL to encrypt data in transit and authenticate the server's identity via digital certificates. HTTP transmits data in plaintext, making it vulnerable to interception."
  },
  {
    q: "A penetration tester has been given no prior information about the target system. This type of test is called:",
    options: ["White box testing", "Gray box testing", "Black box testing", "Crystal box testing"],
    answer: 2,
    explanation: "Black box testing simulates an external attacker with no prior knowledge of the target system. White box testing provides full knowledge, and gray box testing provides partial information. Black box testing evaluates defenses from an outsider's perspective."
  },
  {
    q: "Which type of attack involves an attacker capturing network traffic and replaying it later to gain unauthorized access?",
    options: ["Session hijacking", "Replay attack", "ARP poisoning", "Brute force attack"],
    answer: 1,
    explanation: "A replay attack captures valid network transmissions (such as authentication tokens) and retransmits them to impersonate the original user. Using timestamps, nonces, or session tokens helps prevent replay attacks."
  },
  {
    q: "What is the MAIN purpose of a Security Information and Event Management (SIEM) system?",
    options: ["To prevent malware from executing on endpoints", "To collect, correlate, and analyze security event data from multiple sources", "To encrypt sensitive data at rest", "To manage user authentication and authorization"],
    answer: 1,
    explanation: "A SIEM collects and aggregates log data from multiple sources (firewalls, servers, applications), correlates events, and provides real-time analysis of security alerts. It helps detect threats, investigate incidents, and meet compliance requirements."
  }
];

const EXAMCOMPASS_QUESTIONS = [
  {
    q: "Which of the following BEST describes the CIA triad?",
    options: ["Confidentiality, Integrity, Availability", "Control, Identity, Access", "Cybersecurity, Infrastructure, Architecture", "Classification, Information, Authorization"],
    answer: 0,
    explanation: "The CIA triad is a foundational model in information security. Confidentiality ensures data is accessed only by authorized users. Integrity ensures data is accurate and unmodified. Availability ensures systems and data are accessible when needed."
  },
  {
    q: "What is the primary goal of AAA (Authentication, Authorization, and Accounting)?",
    options: ["Providing encryption for network communications", "Controlling access and tracking user activities on a network", "Scanning systems for vulnerabilities", "Filtering malicious network traffic"],
    answer: 1,
    explanation: "AAA is a framework for controlling access to network resources. Authentication verifies identity, Authorization determines what an authenticated user is allowed to do, and Accounting tracks and logs user activities for auditing and billing purposes."
  },
  {
    q: "In a Zero Trust security model, what is the underlying principle?",
    options: ["Trust all internal network traffic by default", "Never trust, always verify — regardless of network location", "Trust users based on their job role", "Only verify external connections"],
    answer: 1,
    explanation: "Zero Trust assumes that threats exist both inside and outside traditional network boundaries. Every access request must be authenticated, authorized, and continuously validated regardless of where it originates — inside or outside the network perimeter."
  },
  {
    q: "Which type of encryption ensures that a message was not tampered with during transmission?",
    options: ["Asymmetric encryption", "Symmetric encryption", "Hashing", "Steganography"],
    answer: 2,
    explanation: "Hashing creates a fixed-length digest of data. If even one bit of the original data changes, the hash value changes completely. This property — used with digital signatures — verifies message integrity."
  },
  {
    q: "What is the purpose of a honeypot in network security?",
    options: ["To encrypt sensitive data transmissions", "To serve as a decoy system to attract and study attackers", "To filter spam emails from reaching users", "To perform load balancing across servers"],
    answer: 1,
    explanation: "A honeypot is a decoy computer system designed to lure attackers and observe their techniques, gather intelligence about attack methods, and divert attention from real systems. Honeynets are networks of honeypots."
  },
  {
    q: "Which protocol is used to securely transfer files over a network?",
    options: ["FTP", "TFTP", "SFTP", "HTTP"],
    answer: 2,
    explanation: "SFTP (SSH File Transfer Protocol) runs over SSH and encrypts both authentication data and file transfers. FTP and TFTP transmit data in plaintext and are considered insecure for sensitive transfers."
  },
  {
    q: "What is Public Key Infrastructure (PKI) primarily used for?",
    options: ["Managing and distributing public and private key pairs and digital certificates", "Storing passwords in a secure database", "Monitoring network traffic in real time", "Blocking unauthorized access to physical buildings"],
    answer: 0,
    explanation: "PKI is a framework of hardware, software, policies, and procedures needed to create, manage, distribute, use, store, and revoke digital certificates and public-key encryption. It enables secure, encrypted communications and digital signatures."
  },
  {
    q: "An employee tailgates another employee to gain physical access to a secure area without using their own credentials. This is an example of:",
    options: ["Shoulder surfing", "Tailgating/piggybacking", "Vishing", "Dumpster diving"],
    answer: 1,
    explanation: "Tailgating (or piggybacking) is a physical social engineering attack where an unauthorized person gains access to a restricted area by following closely behind an authorized person. Mantraps and security awareness training help prevent this."
  },
  {
    q: "Which of the following BEST describes a security control that is PREVENTIVE in nature?",
    options: ["An IDS alert that notifies the security team", "A firewall that blocks unauthorized traffic", "A SIEM that logs all login attempts", "An audit trail that records user actions"],
    answer: 1,
    explanation: "Preventive controls stop security incidents before they occur. A firewall blocking unauthorized traffic is preventive. IDS alerts and SIEM logs are detective controls. Audit trails are detective/corrective controls."
  },
  {
    q: "What does the term 'non-repudiation' mean in cybersecurity?",
    options: ["Ensuring that data is encrypted at all times", "Preventing a user from denying that they performed an action", "Blocking access to unauthorized users", "Ensuring data is backed up regularly"],
    answer: 1,
    explanation: "Non-repudiation ensures that a party cannot deny the authenticity of their signature on a document or sending of a message. Digital signatures, using asymmetric cryptography, provide non-repudiation by proving who signed or sent a message."
  },
  {
    q: "Which of the following is considered a vulnerability?",
    options: ["A hurricane that damages a data center", "An unpatched operating system running on a production server", "An attacker scanning a network for open ports", "A disgruntled employee with valid system access"],
    answer: 1,
    explanation: "A vulnerability is a weakness in a system that can be exploited. An unpatched OS is a known, exploitable weakness. Hurricanes are threats (natural hazards), an attacker scanning is a threat actor activity, and a disgruntled employee represents a threat."
  },
  {
    q: "What is the main purpose of SSL/TLS in web communications?",
    options: ["To speed up data transmission", "To authenticate the server and encrypt communication between client and server", "To assign IP addresses to clients", "To resolve domain names to IP addresses"],
    answer: 1,
    explanation: "SSL/TLS (now primarily TLS) provides encryption of data in transit, server authentication via digital certificates, and optionally client authentication. It ensures that data exchanged between a browser and web server is private and intact."
  },
  {
    q: "A security professional is assigned the task of identifying weaknesses in a system before attackers do. This process is called:",
    options: ["Incident response", "Vulnerability assessment", "Risk transference", "Business impact analysis"],
    answer: 1,
    explanation: "A vulnerability assessment identifies, quantifies, and prioritizes vulnerabilities in a system. Unlike penetration testing, it typically doesn't involve exploiting vulnerabilities — it focuses on discovery and documentation."
  },
  {
    q: "Which of the following is an example of a physical security control?",
    options: ["Multi-factor authentication", "Firewall rules", "Mantraps and access badges", "Data encryption"],
    answer: 2,
    explanation: "Physical security controls protect against unauthorized physical access. Mantraps (double-door entry systems) and access badges are physical controls. MFA and encryption are logical/technical controls."
  },
  {
    q: "What does RBAC stand for and what is its key concept?",
    options: ["Risk-Based Access Control — access based on risk level", "Role-Based Access Control — access granted based on user's role", "Rule-Based Access Control — access based on system rules", "Resource-Based Access Control — access based on resource type"],
    answer: 1,
    explanation: "RBAC (Role-Based Access Control) grants access permissions based on roles assigned to users, rather than to individual users directly. Users are assigned roles (e.g., admin, developer, manager) and roles have defined access rights."
  },
  {
    q: "An attacker inserts malicious SQL code into an input field on a website to manipulate the backend database. This attack is called:",
    options: ["Cross-Site Scripting (XSS)", "Cross-Site Request Forgery (CSRF)", "SQL Injection", "Buffer overflow"],
    answer: 2,
    explanation: "SQL Injection occurs when malicious SQL statements are inserted into an entry field, causing the backend database to execute unintended commands. This can result in data exposure, modification, or deletion."
  },
  {
    q: "What is the difference between a threat and a vulnerability?",
    options: ["A threat is a weakness; a vulnerability is a potential harm", "A threat is a potential cause of harm; a vulnerability is a weakness that can be exploited", "They are the same thing", "A vulnerability is what attackers do; a threat is a flaw in software"],
    answer: 1,
    explanation: "A threat is anything that can exploit a vulnerability to cause harm (attacker, disaster, error). A vulnerability is a weakness in a system or process. Risk occurs when a threat can exploit a vulnerability."
  },
  {
    q: "Which of the following encryption algorithms is considered ASYMMETRIC?",
    options: ["AES", "DES", "3DES", "RSA"],
    answer: 3,
    explanation: "RSA (Rivest–Shamir–Adleman) is an asymmetric encryption algorithm that uses a public-private key pair. AES, DES, and 3DES are all symmetric algorithms that use a single key for both encryption and decryption."
  },
  {
    q: "What is the goal of Business Continuity Planning (BCP)?",
    options: ["To prosecute attackers after a breach", "To ensure critical business functions continue during and after a disaster", "To identify which employees should be laid off", "To comply with data privacy regulations"],
    answer: 1,
    explanation: "BCP ensures that an organization can continue essential business functions during and after a disaster or disruption. It includes disaster recovery planning (DRP) and focuses on maintaining operations through incidents."
  },
  {
    q: "Which type of malware encrypts victim files and demands payment for the decryption key?",
    options: ["Spyware", "Adware", "Ransomware", "Rootkit"],
    answer: 2,
    explanation: "Ransomware encrypts the victim's files and demands a ransom (usually cryptocurrency) in exchange for the decryption key. Notable examples include WannaCry and NotPetya. Regular backups are the best defense."
  }
];

// ─── State ────────────────────────────────────────────────────────────────────
let state = {
  count: 10,
  sources: ['messer', 'examcompass'],
  timed: false,
  timerMins: 10,
  questions: [],
  current: 0,
  answers: {},
  startTime: null,
  timerInterval: null,
  totalSeconds: 0,
  elapsed: 0
};

// ─── Config Logic ─────────────────────────────────────────────────────────────
function setCount(btn) {
  document.querySelectorAll('#count-group .toggle-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  state.count = parseInt(btn.dataset.val);
  updateSummary();
}

function toggleSource(btn) {
  const val = btn.dataset.val;
  if (btn.classList.contains('active')) {
    const others = document.querySelectorAll('.source-btn.active');
    if (others.length <= 1) return; // keep at least one
    btn.classList.remove('active');
    state.sources = state.sources.filter(s => s !== val);
  } else {
    btn.classList.add('active');
    state.sources.push(val);
  }
  updateSummary();
}

function toggleTimed() {
  state.timed = true;
  document.getElementById('timed-toggle').classList.add('active');
  document.getElementById('untimed-toggle').classList.remove('active');
  document.getElementById('timer-options').classList.add('visible');
  updateSummary();
}

function toggleUntimed() {
  state.timed = false;
  document.getElementById('untimed-toggle').classList.add('active');
  document.getElementById('timed-toggle').classList.remove('active');
  document.getElementById('timer-options').classList.remove('visible');
  updateSummary();
}

function setTimer(btn) {
  document.querySelectorAll('.timer-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  state.timerMins = parseInt(btn.dataset.mins);
  updateSummary();
}

function updateSummary() {
  document.getElementById('sum-count').textContent = state.count;
  const srcLabel = state.sources.length === 2 ? 'All' : 
    state.sources.includes('messer') ? 'Prof. Messer' : 'ExamCompass';
  document.getElementById('sum-source').textContent = srcLabel;
  document.getElementById('sum-timer').textContent = state.timed ? state.timerMins + ' min' : 'Off';
}

// ─── Test Generation ──────────────────────────────────────────────────────────
function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function generateTest() {
  let pool = [];
  if (state.sources.includes('messer')) pool = pool.concat(MESSER_QUESTIONS.map(q => ({...q, source: 'Prof. Messer'})));
  if (state.sources.includes('examcompass')) pool = pool.concat(EXAMCOMPASS_QUESTIONS.map(q => ({...q, source: 'ExamCompass'})));
  
  if (pool.length === 0) return;
  
  pool = shuffle(pool);
  state.questions = pool.slice(0, Math.min(state.count, pool.length));
  state.current = 0;
  state.answers = {};
  state.elapsed = 0;
  state.startTime = Date.now();

  document.getElementById('config-panel').style.display = 'none';
  document.getElementById('quiz-section').style.display = 'block';

  renderQuestions();
  updateNav();

  if (state.timed) {
    state.totalSeconds = state.timerMins * 60;
    document.getElementById('timer-wrap').style.display = 'flex';
    document.getElementById('q-counter-notimer').style.display = 'none';
    startTimer();
  } else {
    document.getElementById('timer-wrap').style.display = 'none';
    document.getElementById('q-counter-notimer').style.display = 'block';
    updateNotimer();
  }
}

function renderQuestions() {
  const wrap = document.getElementById('questions-wrap');
  wrap.innerHTML = '';
  state.questions.forEach((q, idx) => {
    const card = document.createElement('div');
    card.className = 'question-card' + (idx === 0 ? ' active' : '');
    card.id = 'q-' + idx;

    const optsHTML = q.options.map((opt, oi) => {
      const letters = ['A', 'B', 'C', 'D'];
      return `<li class="option-item" onclick="selectAnswer(${idx}, ${oi}, this)">
        <span class="option-letter">${letters[oi]}.</span>
        <span>${opt}</span>
      </li>`;
    }).join('');

    card.innerHTML = `
      <div class="q-meta">
        <span class="q-num">QUESTION ${idx + 1} / ${state.questions.length}</span>
        <span class="q-source-badge">${q.source}</span>
      </div>
      <div class="q-text">${q.q}</div>
      <ul class="options-list">${optsHTML}</ul>
      <div class="explanation" id="exp-${idx}"><strong>Explanation:</strong> ${q.explanation}</div>
    `;
    wrap.appendChild(card);
  });
}

function selectAnswer(qIdx, optIdx, el) {
  const card = document.getElementById('q-' + qIdx);
  const items = card.querySelectorAll('.option-item');
  if (card.classList.contains('answered')) return;
  card.classList.add('answered');
  items.forEach(i => i.classList.add('answered'));

  state.answers[qIdx] = optIdx;
  const correct = state.questions[qIdx].answer;

  items[correct].classList.add('correct');
  if (optIdx !== correct) {
    el.classList.add('selected-wrong');
  }

  document.getElementById('exp-' + qIdx).classList.add('show');
  updateNav();
}

function navigate(dir) {
  document.getElementById('q-' + state.current).classList.remove('active');
  state.current += dir;
  document.getElementById('q-' + state.current).classList.add('active');
  updateNav();
}

function updateNav() {
  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');
  const finishBtn = document.getElementById('finish-btn');
  const total = state.questions.length;
  const c = state.current;

  prevBtn.disabled = c === 0;
  
  const allAnswered = Object.keys(state.answers).length === total;

  if (c === total - 1) {
    nextBtn.style.display = 'none';
    finishBtn.style.display = 'block';
    finishBtn.disabled = !allAnswered;
  } else {
    nextBtn.style.display = 'block';
    finishBtn.style.display = 'none';
    nextBtn.disabled = !(c in state.answers);
  }

  if (!state.timed) updateNotimer();
  else updateTimerCounter();
}

function updateNotimer() {
  document.getElementById('q-counter-notimer').textContent = `Q ${state.current + 1} / ${state.questions.length}`;
}

function updateTimerCounter() {
  document.getElementById('q-counter').textContent = `Q ${state.current + 1} / ${state.questions.length}`;
}

// ─── Timer ────────────────────────────────────────────────────────────────────
function startTimer() {
  let remaining = state.totalSeconds;
  updateTimerDisplay(remaining);

  state.timerInterval = setInterval(() => {
    remaining--;
    state.elapsed++;
    updateTimerDisplay(remaining);
    if (remaining <= 0) {
      clearInterval(state.timerInterval);
      finishTest();
    }
  }, 1000);
}

function updateTimerDisplay(secs) {
  const mins = Math.floor(secs / 60);
  const s = secs % 60;
  const display = document.getElementById('timer-display');
  const fill = document.getElementById('timer-fill');
  const pct = (secs / state.totalSeconds) * 100;

  display.textContent = `${String(mins).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  fill.style.width = pct + '%';

  display.className = 'timer-display';
  fill.className = 'progress-fill';

  if (pct < 25) {
    display.classList.add('danger');
    fill.classList.add('danger');
  } else if (pct < 50) {
    display.classList.add('warning');
    fill.classList.add('warning');
  }
}

function finishTest() {
  if (state.timerInterval) clearInterval(state.timerInterval);
  
  const timeTaken = state.timed 
    ? state.totalSeconds - (state.timed ? (state.timerInterval ? 0 : 0) : 0)
    : Math.floor((Date.now() - state.startTime) / 1000);
  
  // Use elapsed for timed, or actual for untimed
  const actualElapsed = state.timed ? state.elapsed : Math.floor((Date.now() - state.startTime) / 1000);
  
  let correct = 0;
  state.questions.forEach((q, i) => {
    if (state.answers[i] === q.answer) correct++;
  });

  const total = state.questions.length;
  const wrong = total - correct;
  const pct = Math.round((correct / total) * 100);

  document.getElementById('quiz-section').style.display = 'none';
  document.getElementById('results-section').style.display = 'block';

  // Animate score ring
  const circumference = 377;
  const offset = circumference - (pct / 100) * circumference;
  setTimeout(() => {
    document.getElementById('score-circle').style.strokeDashoffset = offset;
    const col = pct >= 83 ? '#00f5a0' : pct >= 60 ? '#ffd32a' : '#ff4757';
    document.getElementById('score-circle').style.stroke = col;
  }, 100);

  document.getElementById('score-pct').textContent = pct + '%';

  const verdict = document.getElementById('result-verdict');
  const sub = document.getElementById('result-sub');

  if (pct >= 83) {
    verdict.textContent = '✓ PASS — Excellent Work!';
    verdict.className = 'result-verdict pass';
    sub.textContent = 'You are on track for the Security+ exam!';
  } else if (pct >= 60) {
    verdict.textContent = '⚠ BORDERLINE — Keep Studying';
    verdict.className = 'result-verdict';
    sub.textContent = 'Review incorrect answers and reinforce weak areas.';
    verdict.style.color = 'var(--yellow)';
  } else {
    verdict.textContent = '✗ NEEDS WORK — Review Required';
    verdict.className = 'result-verdict fail';
    sub.textContent = 'Focus on the topics you missed before retaking.';
  }

  document.getElementById('stat-correct').textContent = correct;
  document.getElementById('stat-wrong').textContent = wrong;

  const mins = Math.floor(actualElapsed / 60);
  const secs = actualElapsed % 60;
  document.getElementById('stat-time').textContent = `${mins}m ${String(secs).padStart(2,'0')}s`;
}

function retryTest() {
  if (state.timerInterval) clearInterval(state.timerInterval);
  document.getElementById('results-section').style.display = 'none';
  document.getElementById('config-panel').style.display = 'block';
  // reset score ring
  document.getElementById('score-circle').style.strokeDashoffset = 377;
}
</script>
</body>
</html>
